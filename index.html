<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HRIS</title>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --info-color: #1abc9c;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --sidebar-width: 250px;
            --sidebar-collapsed-width: 70px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            display: flex;
            min-height: 100vh;
            position: relative;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--dark-color);
            color: white;
            transition: var(--transition);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }

        .sidebar-header {
            padding: 20px;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .sidebar-header h3 {
            margin-left: 10px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .menu-title {
            padding: 10px 20px;
            color: var(--light-color);
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 1px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .menu-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            color: var(--light-color);
            text-decoration: none;
            transition: var(--transition);
            border-left: 3px solid transparent;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
        }

        .menu-item:hover, .menu-item.active {
            background-color: rgba(255, 255, 255, 0.1);
            border-left: 3px solid var(--primary-color);
        }

        .menu-item i {
            margin-right: 10px;
            font-size: 18px;
            min-width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            transition: var(--transition);
            min-width: 0;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background-color: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            overflow: hidden;
        }

        .header-left h1 {
            font-size: 24px;
            color: var(--dark-color);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .header-right {
            display: flex;
            align-items: center;
        }

        .user-profile {
            display: flex;
            align-items: center;
            margin-left: 20px;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
        }

        .user-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }

        .notification-icon {
            position: relative;
            margin-right: 20px;
            cursor: pointer;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--accent-color);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }

        /* Content */
        .content {
            padding: 30px;
        }

        .page-title {
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .page-title h2 {
            color: var(--dark-color);
            margin-right: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 5px;
            white-space: nowrap;
        }

        .btn-sm {
            padding: 5px 10px;
            font-size: 12px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
        }

        .btn-danger {
            background-color: var(--accent-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background-color: #27ae60;
        }

        .btn-warning {
            background-color: var(--warning-color);
            color: white;
        }

        .btn-warning:hover {
            background-color: #e67e22;
        }

        /* Cards */
        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            min-width: 0;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            flex-shrink: 0;
        }

        .bg-primary {
            background-color: var(--primary-color);
        }

        .bg-success {
            background-color: var(--success-color);
        }

        .bg-warning {
            background-color: var(--warning-color);
        }

        .bg-info {
            background-color: var(--info-color);
        }

        .card-title {
            font-size: 14px;
            color: #777;
            margin-bottom: 5px;
        }

        .card-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark-color);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .card-footer {
            margin-top: 15px;
            font-size: 12px;
            color: #777;
            display: flex;
            align-items: center;
        }

        .text-success {
            color: var(--success-color);
        }

        .text-danger {
            color: var(--accent-color);
        }

        /* Tables */
        .table-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 20px;
            overflow-x: auto;
            margin-bottom: 30px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: var(--dark-color);
        }

        tr:hover {
            background-color: #f8f9fa;
        }

        .status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            display: inline-block;
            white-space: nowrap;
        }

        .status-active {
            background-color: #d4edda;
            color: #155724;
        }

        .status-inactive {
            background-color: #f8d7da;
            color: #721c24;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .action-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 5px;
            font-size: 12px;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
        }

        /* Forms */
        .form-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-color);
        }

        .form-control {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            transition: var(--transition);
        }

        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .form-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .form-row .form-group {
            flex: 1;
            min-width: 200px;
        }

        select.form-control {
            height: 40px;
        }

        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }

        .modal-content {
            background-color: white;
            border-radius: 8px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.3s;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background-color: white;
            z-index: 10;
        }

        .modal-header h3 {
            color: var(--dark-color);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #777;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            position: sticky;
            bottom: 0;
            background-color: white;
        }

        /* Alert */
        .alert {
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .alert-success {
            background-color: #d4edda;
            color: #155724;
        }

        .alert-danger {
            background-color: #f8d7da;
            color: #721c24;
        }

        .alert-close {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: inherit;
        }

        /* Search and Filter */
        .search-filter {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            position: relative;
            min-width: 200px;
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #777;
        }

        .search-box input {
            padding-left: 40px;
        }

        .filter-box {
            width: 200px;
            min-width: 150px;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .pagination button {
            padding: 8px 12px;
            margin: 0 5px;
            border: 1px solid #ddd;
            background-color: white;
            cursor: pointer;
            border-radius: 4px;
            margin-bottom: 5px;
        }

        .pagination button.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .pagination button:hover:not(.active) {
            background-color: #f1f1f1;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: var(--transition);
            white-space: nowrap;
        }

        .tab.active {
            border-bottom: 2px solid var(--primary-color);
            color: var(--primary-color);
            font-weight: 500;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 3px 7px;
            font-size: 12px;
            font-weight: 500;
            line-height: 1;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            border-radius: 10px;
        }

        .badge-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .badge-success {
            background-color: var(--success-color);
            color: white;
        }

        .badge-warning {
            background-color: var(--warning-color);
            color: white;
        }

        .badge-danger {
            background-color: var(--accent-color);
            color: white;
        }

        /* Mobile menu toggle */
        .menu-toggle {
            display: none;
            font-size: 20px;
            cursor: pointer;
            margin-right: 15px;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .cards {
                grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            }
        }

        @media (max-width: 992px) {
            .sidebar {
                width: var(--sidebar-collapsed-width);
                overflow: hidden;
            }

            .sidebar-header h3, .menu-title, .menu-item span {
                display: none;
            }

            .menu-item {
                justify-content: center;
                padding: 15px 0;
            }

            .menu-item i {
                margin-right: 0;
                font-size: 20px;
            }

            .main-content {
                margin-left: var(--sidebar-collapsed-width);
            }
        }

        @media (max-width: 768px) {
            .cards {
                grid-template-columns: 1fr 1fr;
            }

            .form-row {
                flex-direction: column;
                gap: 0;
            }

            .search-filter {
                flex-direction: column;
                gap: 10px;
            }

            .filter-box {
                width: 100%;
            }
        }

        @media (max-width: 576px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
                padding: 15px;
            }

            .header-right {
                margin-top: 15px;
                width: 100%;
                justify-content: space-between;
            }

            .cards {
                grid-template-columns: 1fr;
            }

            .content {
                padding: 15px;
            }

            .sidebar {
                transform: translateX(-100%);
                position: fixed;
                width: var(--sidebar-width);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .menu-toggle {
                display: block;
            }

            .page-title {
                flex-direction: column;
                align-items: flex-start;
            }

            .page-title h2 {
                margin-bottom: 10px;
            }

            .modal-content {
                max-height: 85vh;
            }
        }

        /* Icons */
        .fas {
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
        }

        /* Utility Classes */
        .text-center {
            text-align: center;
        }

        .text-right {
            text-align: right;
        }

        .mb-3 {
            margin-bottom: 15px;
        }

        .mt-3 {
            margin-top: 15px;
        }

        .p-3 {
            padding: 15px;
        }

        .d-none {
            display: none;
        }

        .d-flex {
            display: flex;
        }

        .flex-wrap {
            flex-wrap: wrap;
        }

        .w-100 {
            width: 100%;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-users"></i>
                <h3>PRIMANSAH</h3>
            </div>
            <div class="sidebar-menu">
                <div class="menu-title">Menu Utama</div>
                <div class="menu-item active" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </div>
                <div class="menu-item" data-tab="employees">
                    <i class="fas fa-user-tie"></i>
                    <span>Karyawan</span>
                </div>
                <div class="menu-item" data-tab="attendance">
                    <i class="fas fa-calendar-check"></i>
                    <span>Kehadiran</span>
                </div>
                <div class="menu-item" data-tab="leave">
                    <i class="fas fa-calendar-minus"></i>
                    <span>Cuti</span>
                </div>
                <div class="menu-item" data-tab="payroll">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>Penggajian</span>
                </div>
                <div class="menu-item" data-tab="performance">
                    <i class="fas fa-chart-line"></i>
                    <span>Kinerja</span>
                </div>
                <div class="menu-title">Pengaturan</div>
                <div class="menu-item" data-tab="settings">
                    <i class="fas fa-cog"></i>
                    <span>Pengaturan</span>
                </div>
                <div class="menu-item" data-tab="help">
                    <i class="fas fa-question-circle"></i>
                    <span>Bantuan</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-left">
                    <i class="fas fa-bars menu-toggle" id="menuToggle"></i>
                    <h1 id="pageTitle">Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="notification-icon">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </div>
                    <div class="user-profile">
                        <img src="Johnny-Sins1.jpg" alt="User" id="profileImage">
                        <span id="profileName">PRIMANSAH</span>
                    </div>
                </div>
            </div>

            <!-- Content -->
            <div class="content">
                <!-- Dashboard Tab -->
                <div class="tab-content active" id="dashboard">
                    <div class="page-title">
                        <h2>Dashboard HRIS</h2>
                        <div>
                            <button class="btn btn-primary" id="exportReportBtn">
                                <i class="fas fa-download"></i> Export Laporan
                            </button>
                        </div>
                    </div>

                    <!-- Alert -->
                    <div id="dashboardAlert" class="alert alert-success d-none">
                        <span id="alertMessage"></span>
                        <button class="alert-close">&times;</button>
                    </div>

                    <!-- Cards -->
                    <div class="cards">
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">Total Karyawan</div>
                                    <div class="card-value" id="totalEmployees">0</div>
                                </div>
                                <div class="card-icon bg-primary">
                                    <i class="fas fa-users"></i>
                                </div>
                            </div>
                            <div class="card-footer">
                                <i class="fas fa-arrow-up text-success"></i> <span id="employeeChange">0%</span> dari bulan lalu
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">Kehadiran Hari Ini</div>
                                    <div class="card-value" id="todayAttendance">0</div>
                                </div>
                                <div class="card-icon bg-success">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                            </div>
                            <div class="card-footer">
                                <span id="absentToday">0</span> karyawan tidak hadir
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">Pengajuan Cuti</div>
                                    <div class="card-value" id="pendingLeave">0</div>
                                </div>
                                <div class="card-icon bg-warning">
                                    <i class="fas fa-calendar-minus"></i>
                                </div>
                            </div>
                            <div class="card-footer">
                                <span id="waitingApproval">0</span> menunggu persetujuan
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <div class="card-title">Pengeluaran Gaji</div>
                                    <div class="card-value" id="monthlySalary">Rp 0</div>
                                </div>
                                <div class="card-icon bg-info">
                                    <i class="fas fa-money-bill-wave"></i>
                                </div>
                            </div>
                            <div class="card-footer">
                                Bulan ini
                            </div>
                        </div>
                    </div>

                    <!-- Recent Employees -->
                    <div class="table-container mb-3">
                        <div class="page-title">
                            <h2>Karyawan Baru</h2>
                            <button class="btn btn-primary" id="addEmployeeBtn">
                                <i class="fas fa-plus"></i> Tambah Karyawan
                            </button>
                        </div>
                        <table id="recentEmployeesTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nama</th>
                                    <th>Posisi</th>
                                    <th>Departemen</th>
                                    <th>Tanggal Bergabung</th>
                                    <th>Status</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data akan diisi oleh JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Attendance Summary -->
                    <div class="table-container">
                        <div class="page-title">
                            <h2>Ringkasan Kehadiran Bulan Ini</h2>
                        </div>
                        <table id="attendanceSummaryTable">
                            <thead>
                                <tr>
                                    <th>Departemen</th>
                                    <th>Total Karyawan</th>
                                    <th>Hadir</th>
                                    <th>Izin</th>
                                    <th>Sakit</th>
                                    <th>Cuti</th>
                                    <th>Tanpa Keterangan</th>
                                    <th>Persentase</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data akan diisi oleh JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Employees Tab -->
                <div class="tab-content" id="employees">
                    <div class="page-title">
                        <h2>Manajemen Karyawan</h2>
                        <div>
                            <button class="btn btn-primary" id="addEmployeeBtn2">
                                <i class="fas fa-plus"></i> Tambah Karyawan
                            </button>
                        </div>
                    </div>

                    <!-- Alert -->
                    <div id="employeeAlert" class="alert alert-success d-none">
                        <span id="employeeAlertMessage"></span>
                        <button class="alert-close">&times;</button>
                    </div>

                    <div class="search-filter">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="employeeSearch" class="form-control" placeholder="Cari karyawan...">
                        </div>
                        <div class="filter-box">
                            <select id="employeeFilter" class="form-control">
                                <option value="">Semua Departemen</option>
                                <option value="IT">IT</option>
                                <option value="Marketing">Marketing</option>
                                <option value="Finance">Finance</option>
                                <option value="HR">HR</option>
                                <option value="Operations">Operations</option>
                            </select>
                        </div>
                    </div>

                    <div class="tabs">
                        <div class="tab active" data-subtab="all-employees">Semua Karyawan</div>
                        <div class="tab" data-subtab="active-employees">Aktif</div>
                        <div class="tab" data-subtab="inactive-employees">Non-Aktif</div>
                        <div class="tab" data-subtab="on-leave">Cuti</div>
                    </div>

                    <div class="tab-content active" id="all-employees">
                        <div class="table-container">
                            <table id="allEmployeesTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nama</th>
                                        <th>Posisi</th>
                                        <th>Departemen</th>
                                        <th>Tanggal Bergabung</th>
                                        <th>Status</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                            <div class="pagination" id="allEmployeesPagination">
                                <!-- Pagination akan diisi oleh JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="active-employees">
                        <div class="table-container">
                            <table id="activeEmployeesTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nama</th>
                                        <th>Posisi</th>
                                        <th>Departemen</th>
                                        <th>Tanggal Bergabung</th>
                                        <th>Status</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                            <div class="pagination" id="activeEmployeesPagination">
                                <!-- Pagination akan diisi oleh JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="inactive-employees">
                        <div class="table-container">
                            <table id="inactiveEmployeesTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nama</th>
                                        <th>Posisi</th>
                                        <th>Departemen</th>
                                        <th>Tanggal Keluar</th>
                                        <th>Status</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                            <div class="pagination" id="inactiveEmployeesPagination">
                                <!-- Pagination akan diisi oleh JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="on-leave">
                        <div class="table-container">
                            <table id="onLeaveEmployeesTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nama</th>
                                        <th>Posisi</th>
                                        <th>Departemen</th>
                                        <th>Tanggal Cuti</th>
                                        <th>Durasi</th>
                                        <th>Status</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                            <div class="pagination" id="onLeaveEmployeesPagination">
                                <!-- Pagination akan diisi oleh JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Attendance Tab -->
                <div class="tab-content" id="attendance">
                    <div class="page-title">
                        <h2>Manajemen Kehadiran</h2>
                        <div>
                            <button class="btn btn-primary" id="addAttendanceBtn">
                                <i class="fas fa-plus"></i> Tambah Kehadiran
                            </button>
                        </div>
                    </div>

                    <!-- Alert -->
                    <div id="attendanceAlert" class="alert alert-success d-none">
                        <span id="attendanceAlertMessage"></span>
                        <button class="alert-close">&times;</button>
                    </div>

                    <div class="search-filter">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="attendanceSearch" class="form-control" placeholder="Cari kehadiran...">
                        </div>
                        <div class="filter-box">
                            <select id="attendanceFilter" class="form-control">
                                <option value="">Semua Status</option>
                                <option value="Hadir">Hadir</option>
                                <option value="Izin">Izin</option>
                                <option value="Sakit">Sakit</option>
                                <option value="Cuti">Cuti</option>
                            </select>
                        </div>
                    </div>

                    <div class="table-container">
                        <table id="attendanceTable">
                            <thead>
                                <tr>
                                    <th>Tanggal</th>
                                    <th>Nama Karyawan</th>
                                    <th>Jam Masuk</th>
                                    <th>Jam Keluar</th>
                                    <th>Status</th>
                                    <th>Keterangan</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data akan diisi oleh JavaScript -->
                            </tbody>
                        </table>
                        <div class="pagination" id="attendancePagination">
                            <!-- Pagination akan diisi oleh JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Leave Tab -->
                <div class="tab-content" id="leave">
                    <div class="page-title">
                        <h2>Manajemen Cuti</h2>
                        <div>
                            <button class="btn btn-primary" id="addLeaveBtn">
                                <i class="fas fa-plus"></i> Ajukan Cuti
                            </button>
                        </div>
                    </div>

                    <!-- Alert -->
                    <div id="leaveAlert" class="alert alert-success d-none">
                        <span id="leaveAlertMessage"></span>
                        <button class="alert-close">&times;</button>
                    </div>

                    <div class="search-filter">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="leaveSearch" class="form-control" placeholder="Cari cuti...">
                        </div>
                        <div class="filter-box">
                            <select id="leaveFilter" class="form-control">
                                <option value="">Semua Status</option>
                                <option value="Menunggu">Menunggu</option>
                                <option value="Disetujui">Disetujui</option>
                                <option value="Ditolak">Ditolak</option>
                            </select>
                        </div>
                    </div>

                    <div class="tabs">
                        <div class="tab active" data-subtab="all-leave">Semua Cuti</div>
                        <div class="tab" data-subtab="pending-leave">Menunggu</div>
                        <div class="tab" data-subtab="approved-leave">Disetujui</div>
                        <div class="tab" data-subtab="rejected-leave">Ditolak</div>
                    </div>

                    <div class="tab-content active" id="all-leave">
                        <div class="table-container">
                            <table id="allLeaveTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nama Karyawan</th>
                                        <th>Jenis Cuti</th>
                                        <th>Tanggal Mulai</th>
                                        <th>Tanggal Selesai</th>
                                        <th>Durasi</th>
                                        <th>Status</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                            <div class="pagination" id="allLeavePagination">
                                <!-- Pagination akan diisi oleh JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="pending-leave">
                        <div class="table-container">
                            <table id="pendingLeaveTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nama Karyawan</th>
                                        <th>Jenis Cuti</th>
                                        <th>Tanggal Mulai</th>
                                        <th>Tanggal Selesai</th>
                                        <th>Durasi</th>
                                        <th>Status</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                            <div class="pagination" id="pendingLeavePagination">
                                <!-- Pagination akan diisi oleh JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="approved-leave">
                        <div class="table-container">
                            <table id="approvedLeaveTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nama Karyawan</th>
                                        <th>Jenis Cuti</th>
                                        <th>Tanggal Mulai</th>
                                        <th>Tanggal Selesai</th>
                                        <th>Durasi</th>
                                        <th>Status</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                            <div class="pagination" id="approvedLeavePagination">
                                <!-- Pagination akan diisi oleh JavaScript -->
                            </div>
                        </div>
                    </div>

                    <div class="tab-content" id="rejected-leave">
                        <div class="table-container">
                            <table id="rejectedLeaveTable">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nama Karyawan</th>
                                        <th>Jenis Cuti</th>
                                        <th>Tanggal Mulai</th>
                                        <th>Tanggal Selesai</th>
                                        <th>Durasi</th>
                                        <th>Status</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data akan diisi oleh JavaScript -->
                                </tbody>
                            </table>
                            <div class="pagination" id="rejectedLeavePagination">
                                <!-- Pagination akan diisi oleh JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payroll Tab -->
                <div class="tab-content" id="payroll">
                    <div class="page-title">
                        <h2>Manajemen Penggajian</h2>
                        <div>
                            <button class="btn btn-primary" id="addPayrollBtn">
                                <i class="fas fa-plus"></i> Buat Penggajian
                            </button>
                        </div>
                    </div>

                    <!-- Alert -->
                    <div id="payrollAlert" class="alert alert-success d-none">
                        <span id="payrollAlertMessage"></span>
                        <button class="alert-close">&times;</button>
                    </div>

                    <div class="search-filter">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="payrollSearch" class="form-control" placeholder="Cari penggajian...">
                        </div>
                        <div class="filter-box">
                            <select id="payrollFilter" class="form-control">
                                <option value="">Semua Status</option>
                                <option value="Dibayar">Dibayar</option>
                                <option value="Proses">Proses</option>
                                <option value="Dibatalkan">Dibatalkan</option>
                            </select>
                        </div>
                    </div>

                    <div class="table-container">
                        <table id="payrollTable">
                            <thead>
                                <tr>
                                    <th>Periode</th>
                                    <th>Jumlah Karyawan</th>
                                    <th>Total Gaji</th>
                                    <th>Status</th>
                                    <th>Tanggal Pembayaran</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data akan diisi oleh JavaScript -->
                            </tbody>
                        </table>
                        <div class="pagination" id="payrollPagination">
                            <!-- Pagination akan diisi oleh JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Performance Tab -->
                <div class="tab-content" id="performance">
                    <div class="page-title">
                        <h2>Evaluasi Kinerja</h2>
                        <div>
                            <button class="btn btn-primary" id="addPerformanceBtn">
                                <i class="fas fa-plus"></i> Buat Evaluasi
                            </button>
                        </div>
                    </div>

                    <!-- Alert -->
                    <div id="performanceAlert" class="alert alert-success d-none">
                        <span id="performanceAlertMessage"></span>
                        <button class="alert-close">&times;</button>
                    </div>

                    <div class="search-filter">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="performanceSearch" class="form-control" placeholder="Cari evaluasi...">
                        </div>
                        <div class="filter-box">
                            <select id="performanceFilter" class="form-control">
                                <option value="">Semua Status</option>
                                <option value="Selesai">Selesai</option>
                                <option value="Dalam Proses">Dalam Proses</option>
                                <option value="Belum Dimulai">Belum Dimulai</option>
                            </select>
                        </div>
                    </div>

                    <div class="table-container">
                        <table id="performanceTable">
                            <thead>
                                <tr>
                                    <th>Periode</th>
                                    <th>Nama Karyawan</th>
                                    <th>Posisi</th>
                                    <th>Departemen</th>
                                    <th>Nilai</th>
                                    <th>Status</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data akan diisi oleh JavaScript -->
                            </tbody>
                        </table>
                        <div class="pagination" id="performancePagination">
                            <!-- Pagination akan diisi oleh JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="tab-content" id="settings">
                    <div class="page-title">
                        <h2>Pengaturan Sistem</h2>
                    </div>

                    <!-- Alert -->
                    <div id="settingsAlert" class="alert alert-success d-none">
                        <span id="settingsAlertMessage"></span>
                        <button class="alert-close">&times;</button>
                    </div>

                    <div class="form-container">
                        <h3>Pengaturan Umum</h3>
                        <div class="form-group">
                            <label for="companyName">Nama Perusahaan</label>
                            <input type="text" id="companyName" class="form-control">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="workingDays">Hari Kerja</label>
                                <select id="workingDays" class="form-control" multiple>
                                    <option value="Monday">Senin</option>
                                    <option value="Tuesday">Selasa</option>
                                    <option value="Wednesday">Rabu</option>
                                    <option value="Thursday">Kamis</option>
                                    <option value="Friday">Jumat</option>
                                    <option value="Saturday">Sabtu</option>
                                    <option value="Sunday">Minggu</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="workingHours">Jam Kerja</label>
                                <input type="text" id="workingHours" class="form-control" placeholder="Contoh: 08:00 - 17:00">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="companyLogo">Logo Perusahaan</label>
                            <input type="file" id="companyLogo" class="form-control">
                        </div>
                        <button class="btn btn-primary" id="saveGeneralSettings">Simpan Perubahan</button>
                    </div>

                    <div class="form-container">
                        <h3>Pengaturan Cuti</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="annualLeave">Cuti Tahunan (hari/tahun)</label>
                                <input type="number" id="annualLeave" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="sickLeave">Cuti Sakit (hari/tahun)</label>
                                <input type="number" id="sickLeave" class="form-control">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="marriageLeave">Cuti Menikah (hari)</label>
                                <input type="number" id="marriageLeave" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="maternityLeave">Cuti Melahirkan (hari)</label>
                                <input type="number" id="maternityLeave" class="form-control">
                            </div>
                        </div>
                        <button class="btn btn-primary" id="saveLeaveSettings">Simpan Perubahan</button>
                    </div>
                </div>

                <!-- Help Tab -->
                <div class="tab-content" id="help">
                    <div class="page-title">
                        <h2>Bantuan & Dukungan</h2>
                    </div>

                    <div class="card mb-3">
                        <div class="card-header">
                            <h3>Panduan Penggunaan</h3>
                        </div>
                        <div class="card-body">
                            <p>Berikut adalah panduan penggunaan sistem HRIS:</p>
                            <ol>
                                <li><strong>Dashboard</strong> - Menampilkan ringkasan informasi HR</li>
                                <li><strong>Karyawan</strong> - Kelola data karyawan perusahaan</li>
                                <li><strong>Kehadiran</strong> - Pantau kehadiran karyawan</li>
                                <li><strong>Cuti</strong> - Kelola pengajuan cuti karyawan</li>
                                <li><strong>Penggajian</strong> - Proses pembayaran gaji karyawan</li>
                                <li><strong>Kinerja</strong> - Evaluasi kinerja karyawan</li>
                            </ol>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Hubungi Dukungan</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label for="supportSubject">Subjek</label>
                                <input type="text" id="supportSubject" class="form-control" placeholder="Masukkan subjek">
                            </div>
                            <div class="form-group">
                                <label for="supportMessage">Pesan</label>
                                <textarea id="supportMessage" class="form-control" rows="5" placeholder="Deskripsikan masalah Anda"></textarea>
                            </div>
                            <button class="btn btn-primary" id="sendSupportRequest">Kirim Permintaan</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Employee Modal -->
    <div class="modal" id="addEmployeeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Tambah Karyawan Baru</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="employeeForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="empFirstName">Nama Depan*</label>
                            <input type="text" id="empFirstName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="empLastName">Nama Belakang*</label>
                            <input type="text" id="empLastName" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="empEmail">Email*</label>
                        <input type="email" id="empEmail" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="empPhone">Nomor Telepon</label>
                        <input type="tel" id="empPhone" class="form-control">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="empPosition">Posisi*</label>
                            <select id="empPosition" class="form-control" required>
                                <option value="">Pilih Posisi</option>
                                <option value="Manager">Manager</option>
                                <option value="Supervisor">Supervisor</option>
                                <option value="Staff">Staff</option>
                                <option value="Developer">Developer</option>
                                <option value="Designer">Designer</option>
                                <option value="Accountant">Accountant</option>
                                <option value="HR Staff">HR Staff</option>
                                <option value="Marketing Specialist">Marketing Specialist</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="empDepartment">Departemen*</label>
                            <select id="empDepartment" class="form-control" required>
                                <option value="">Pilih Departemen</option>
                                <option value="IT">IT</option>
                                <option value="Marketing">Marketing</option>
                                <option value="Finance">Finance</option>
                                <option value="HR">HR</option>
                                <option value="Operations">Operations</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="empJoinDate">Tanggal Bergabung*</label>
                            <input type="date" id="empJoinDate" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="empStatus">Status*</label>
                            <select id="empStatus" class="form-control" required>
                                <option value="Active">Aktif</option>
                                <option value="Inactive">Non-Aktif</option>
                                <option value="Probation">Masa Percobaan</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="empSalary">Gaji Pokok</label>
                        <input type="number" id="empSalary" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="empAddress">Alamat</label>
                        <textarea id="empAddress" class="form-control" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="empPhoto">Foto Profil</label>
                        <input type="file" id="empPhoto" class="form-control">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger modal-close">Batal</button>
                <button class="btn btn-primary" id="saveEmployeeBtn">Simpan</button>
            </div>
        </div>
    </div>

    <!-- Edit Employee Modal -->
    <div class="modal" id="editEmployeeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Data Karyawan</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editEmployeeForm">
                    <input type="hidden" id="editEmpId">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editEmpFirstName">Nama Depan*</label>
                            <input type="text" id="editEmpFirstName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="editEmpLastName">Nama Belakang*</label>
                            <input type="text" id="editEmpLastName" class="form-control" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="editEmpEmail">Email*</label>
                            <input type="email" id="editEmpEmail" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="editEmpPhone">Nomor Telepon</label>
                            <input type="tel" id="editEmpPhone" class="form-control">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="editEmpPosition">Posisi*</label>
                                <select id="editEmpPosition" class="form-control" required>
                                    <option value="">Pilih Posisi</option>
                                    <option value="Manager">Manager</option>
                                    <option value="Supervisor">Supervisor</option>
                                    <option value="Staff">Staff</option>
                                    <option value="Developer">Developer</option>
                                    <option value="Designer">Designer</option>
                                    <option value="Accountant">Accountant</option>
                                    <option value="HR Staff">HR Staff</option>
                                    <option value="Marketing Specialist">Marketing Specialist</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="editEmpDepartment">Departemen*</label>
                                <select id="editEmpDepartment" class="form-control" required>
                                    <option value="">Pilih Departemen</option>
                                    <option value="IT">IT</option>
                                    <option value="Marketing">Marketing</option>
                                    <option value="Finance">Finance</option>
                                    <option value="HR">HR</option>
                                    <option value="Operations">Operations</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="editEmpJoinDate">Tanggal Bergabung*</label>
                                <input type="date" id="editEmpJoinDate" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="editEmpStatus">Status*</label>
                                <select id="editEmpStatus" class="form-control" required>
                                    <option value="Active">Aktif</option>
                                    <option value="Inactive">Non-Aktif</option>
                                    <option value="Probation">Masa Percobaan</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="editEmpSalary">Gaji Pokok</label>
                            <input type="number" id="editEmpSalary" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="editEmpAddress">Alamat</label>
                            <textarea id="editEmpAddress" class="form-control" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="editEmpPhoto">Foto Profil</label>
                            <input type="file" id="editEmpPhoto" class="form-control">
                            <div id="currentPhoto" class="mt-2"></div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger modal-close">Batal</button>
                    <button class="btn btn-primary" id="updateEmployeeBtn">Perbarui</button>
                </div>
            </div>
        </div>

        <!-- View Employee Modal -->
        <div class="modal" id="viewEmployeeModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Detail Karyawan</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <img id="viewEmpPhoto" src="" alt="Foto Profil" width="120" height="120" class="rounded-circle border" style="object-fit: cover;">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Nama Lengkap</label>
                            <div class="form-control-static" id="viewEmpName"></div>
                        </div>
                        <div class="form-group">
                            <label>ID Karyawan</label>
                            <div class="form-control-static" id="viewEmpId"></div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Email</label>
                            <div class="form-control-static" id="viewEmpEmail"></div>
                        </div>
                        <div class="form-group">
                            <label>Nomor Telepon</label>
                            <div class="form-control-static" id="viewEmpPhone"></div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Posisi</label>
                            <div class="form-control-static" id="viewEmpPosition"></div>
                        </div>
                        <div class="form-group">
                            <label>Departemen</label>
                            <div class="form-control-static" id="viewEmpDepartment"></div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Tanggal Bergabung</label>
                            <div class="form-control-static" id="viewEmpJoinDate"></div>
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <div class="form-control-static" id="viewEmpStatus"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Gaji Pokok</label>
                        <div class="form-control-static" id="viewEmpSalary"></div>
                    </div>
                    <div class="form-group">
                        <label>Alamat</label>
                        <div class="form-control-static" id="viewEmpAddress"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary modal-close">Tutup</button>
                </div>
            </div>
        </div>

        <!-- Add Attendance Modal -->
        <div class="modal" id="addAttendanceModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Tambah Data Kehadiran</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="attendanceForm">
                        <div class="form-group">
                            <label for="attEmpId">Karyawan*</label>
                            <select id="attEmpId" class="form-control" required>
                                <option value="">Pilih Karyawan</option>
                                <!-- Options will be filled by JavaScript -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="attDate">Tanggal*</label>
                            <input type="date" id="attDate" class="form-control" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="attClockIn">Jam Masuk</label>
                                <input type="time" id="attClockIn" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="attClockOut">Jam Keluar</label>
                                <input type="time" id="attClockOut" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="attStatus">Status*</label>
                            <select id="attStatus" class="form-control" required>
                                <option value="Hadir">Hadir</option>
                                <option value="Izin">Izin</option>
                                <option value="Sakit">Sakit</option>
                                <option value="Cuti">Cuti</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="attNotes">Keterangan</label>
                            <textarea id="attNotes" class="form-control" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger modal-close">Batal</button>
                    <button class="btn btn-primary" id="saveAttendanceBtn">Simpan</button>
                </div>
            </div>
        </div>

        <!-- Edit Attendance Modal -->
        <div class="modal" id="editAttendanceModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Edit Data Kehadiran</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="editAttendanceForm">
                        <input type="hidden" id="editAttId">
                        <div class="form-group">
                            <label>Karyawan</label>
                            <div class="form-control-static" id="editAttEmpName"></div>
                        </div>
                        <div class="form-group">
                            <label for="editAttDate">Tanggal*</label>
                            <input type="date" id="editAttDate" class="form-control" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="editAttClockIn">Jam Masuk</label>
                                <input type="time" id="editAttClockIn" class="form-control">
                            </div>
                            <div class="form-group">
                                <label for="editAttClockOut">Jam Keluar</label>
                                <input type="time" id="editAttClockOut" class="form-control">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="editAttStatus">Status*</label>
                            <select id="editAttStatus" class="form-control" required>
                                <option value="Hadir">Hadir</option>
                                <option value="Izin">Izin</option>
                                <option value="Sakit">Sakit</option>
                                <option value="Cuti">Cuti</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editAttNotes">Keterangan</label>
                            <textarea id="editAttNotes" class="form-control" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger modal-close">Batal</button>
                    <button class="btn btn-primary" id="updateAttendanceBtn">Perbarui</button>
                </div>
            </div>
        </div>

        <!-- Add Leave Modal -->
        <div class="modal" id="addLeaveModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Ajukan Cuti</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="leaveForm">
                        <div class="form-group">
                            <label for="leaveEmpId">Karyawan*</label>
                            <select id="leaveEmpId" class="form-control" required>
                                <option value="">Pilih Karyawan</option>
                                <!-- Options will be filled by JavaScript -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="leaveType">Jenis Cuti*</label>
                            <select id="leaveType" class="form-control" required>
                                <option value="">Pilih Jenis Cuti</option>
                                <option value="Tahunan">Cuti Tahunan</option>
                                <option value="Sakit">Cuti Sakit</option>
                                <option value="Melahirkan">Cuti Melahirkan</option>
                                <option value="Menikah">Cuti Menikah</option>
                                <option value="Keluarga">Cuti Keluarga</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="leaveStartDate">Tanggal Mulai*</label>
                                <input type="date" id="leaveStartDate" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="leaveEndDate">Tanggal Selesai*</label>
                                <input type="date" id="leaveEndDate" class="form-control" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="leaveDuration">Durasi (hari)</label>
                            <input type="number" id="leaveDuration" class="form-control" readonly>
                        </div>
                        <div class="form-group">
                            <label for="leaveReason">Alasan*</label>
                            <textarea id="leaveReason" class="form-control" rows="3" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="leaveStatus">Status*</label>
                            <select id="leaveStatus" class="form-control" required>
                                <option value="Menunggu">Menunggu</option>
                                <option value="Disetujui">Disetujui</option>
                                <option value="Ditolak">Ditolak</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger modal-close">Batal</button>
                    <button class="btn btn-primary" id="saveLeaveBtn">Simpan</button>
                </div>
            </div>
        </div>

        <!-- Edit Leave Modal -->
        <div class="modal" id="editLeaveModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Edit Pengajuan Cuti</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="editLeaveForm">
                        <input type="hidden" id="editLeaveId">
                        <div class="form-group">
                            <label>Karyawan</label>
                            <div class="form-control-static" id="editLeaveEmpName"></div>
                        </div>
                        <div class="form-group">
                            <label for="editLeaveType">Jenis Cuti*</label>
                            <select id="editLeaveType" class="form-control" required>
                                <option value="">Pilih Jenis Cuti</option>
                                <option value="Tahunan">Cuti Tahunan</option>
                                <option value="Sakit">Cuti Sakit</option>
                                <option value="Melahirkan">Cuti Melahirkan</option>
                                <option value="Menikah">Cuti Menikah</option>
                                <option value="Keluarga">Cuti Keluarga</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="editLeaveStartDate">Tanggal Mulai*</label>
                                <input type="date" id="editLeaveStartDate" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label for="editLeaveEndDate">Tanggal Selesai*</label>
                                <input type="date" id="editLeaveEndDate" class="form-control" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="editLeaveDuration">Durasi (hari)</label>
                            <input type="number" id="editLeaveDuration" class="form-control" readonly>
                        </div>
                        <div class="form-group">
                            <label for="editLeaveReason">Alasan*</label>
                            <textarea id="editLeaveReason" class="form-control" rows="3" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="editLeaveStatus">Status*</label>
                            <select id="editLeaveStatus" class="form-control" required>
                                <option value="Menunggu">Menunggu</option>
                                <option value="Disetujui">Disetujui</option>
                                <option value="Ditolak">Ditolak</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger modal-close">Batal</button>
                    <button class="btn btn-primary" id="updateLeaveBtn">Perbarui</button>
                </div>
            </div>
        </div>

        <!-- View Leave Modal -->
        <div class="modal" id="viewLeaveModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Detail Pengajuan Cuti</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>ID Cuti</label>
                        <div class="form-control-static" id="viewLeaveId"></div>
                    </div>
                    <div class="form-group">
                        <label>Karyawan</label>
                        <div class="form-control-static" id="viewLeaveEmpName"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Jenis Cuti</label>
                            <div class="form-control-static" id="viewLeaveType"></div>
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <div class="form-control-static" id="viewLeaveStatus"></div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Tanggal Mulai</label>
                            <div class="form-control-static" id="viewLeaveStartDate"></div>
                        </div>
                        <div class="form-group">
                            <label>Tanggal Selesai</label>
                            <div class="form-control-static" id="viewLeaveEndDate"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Durasi</label>
                        <div class="form-control-static" id="viewLeaveDuration"></div>
                    </div>
                    <div class="form-group">
                        <label>Alasan</label>
                        <div class="form-control-static" id="viewLeaveReason"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary modal-close">Tutup</button>
                </div>
            </div>
        </div>

        <!-- Add Payroll Modal -->
        <div class="modal" id="addPayrollModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Buat Penggajian</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="payrollForm">
                        <div class="form-group">
                            <label for="payrollPeriod">Periode*</label>
                            <input type="month" id="payrollPeriod" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="payrollDate">Tanggal Pembayaran*</label>
                            <input type="date" id="payrollDate" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="payrollStatus">Status*</label>
                            <select id="payrollStatus" class="form-control" required>
                                <option value="Dibayar">Dibayar</option>
                                <option value="Proses">Proses</option>
                                <option value="Dibatalkan">Dibatalkan</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Daftar Karyawan</label>
                            <div class="table-container" style="max-height: 300px; overflow-y: auto;">
                                <table id="payrollEmployeeTable">
                                    <thead>
                                        <tr>
                                            <th>Pilih</th>
                                            <th>Nama</th>
                                            <th>Posisi</th>
                                            <th>Gaji Pokok</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Options will be filled by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="payrollTotal">Total Gaji</label>
                            <input type="text" id="payrollTotal" class="form-control" readonly>
                        </div>
                        <div class="form-group">
                            <label for="payrollNotes">Catatan</label>
                            <textarea id="payrollNotes" class="form-control" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger modal-close">Batal</button>
                    <button class="btn btn-primary" id="savePayrollBtn">Simpan</button>
                </div>
            </div>
        </div>

        <!-- View Payroll Modal -->
        <div class="modal" id="viewPayrollModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Detail Penggajian</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Periode</label>
                            <div class="form-control-static" id="viewPayrollPeriod"></div>
                        </div>
                        <div class="form-group">
                            <label>Tanggal Pembayaran</label>
                            <div class="form-control-static" id="viewPayrollDate"></div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Jumlah Karyawan</label>
                            <div class="form-control-static" id="viewPayrollEmployeeCount"></div>
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <div class="form-control-static" id="viewPayrollStatus"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Total Gaji</label>
                        <div class="form-control-static" id="viewPayrollTotal"></div>
                    </div>
                    <div class="form-group">
                        <label>Daftar Karyawan</label>
                        <div class="table-container" style="max-height: 300px; overflow-y: auto;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nama</th>
                                        <th>Posisi</th>
                                        <th>Gaji Pokok</th>
                                    </tr>
                                </thead>
                                <tbody id="viewPayrollEmployeeList">
                                    <!-- Data will be filled by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Catatan</label>
                        <div class="form-control-static" id="viewPayrollNotes"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary modal-close">Tutup</button>
                </div>
            </div>
        </div>

        <!-- Add Performance Modal -->
        <div class="modal" id="addPerformanceModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Buat Evaluasi Kinerja</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="performanceForm">
                        <div class="form-group">
                            <label for="perfEmpId">Karyawan*</label>
                            <select id="perfEmpId" class="form-control" required>
                                <option value="">Pilih Karyawan</option>
                                <!-- Options will be filled by JavaScript -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="perfPeriod">Periode*</label>
                            <input type="text" id="perfPeriod" class="form-control" placeholder="Contoh: Q2 2023" required>
                        </div>
                        <div class="form-group">
                            <label for="perfScore">Nilai (1-5)*</label>
                            <input type="number" id="perfScore" class="form-control" min="1" max="5" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="perfStatus">Status*</label>
                            <select id="perfStatus" class="form-control" required>
                                <option value="Selesai">Selesai</option>
                                <option value="Dalam Proses">Dalam Proses</option>
                                <option value="Belum Dimulai">Belum Dimulai</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="perfComments">Komentar</label>
                            <textarea id="perfComments" class="form-control" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger modal-close">Batal</button>
                    <button class="btn btn-primary" id="savePerformanceBtn">Simpan</button>
                </div>
            </div>
        </div>

        <!-- Edit Performance Modal -->
        <div class="modal" id="editPerformanceModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Edit Evaluasi Kinerja</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="editPerformanceForm">
                        <input type="hidden" id="editPerfId">
                        <div class="form-group">
                            <label>Karyawan</label>
                            <div class="form-control-static" id="editPerfEmpName"></div>
                        </div>
                        <div class="form-group">
                            <label for="editPerfPeriod">Periode*</label>
                            <input type="text" id="editPerfPeriod" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="editPerfScore">Nilai (1-5)*</label>
                            <input type="number" id="editPerfScore" class="form-control" min="1" max="5" step="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="editPerfStatus">Status*</label>
                            <select id="editPerfStatus" class="form-control" required>
                                <option value="Selesai">Selesai</option>
                                <option value="Dalam Proses">Dalam Proses</option>
                                <option value="Belum Dimulai">Belum Dimulai</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editPerfComments">Komentar</label>
                            <textarea id="editPerfComments" class="form-control" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger modal-close">Batal</button>
                    <button class="btn btn-primary" id="updatePerformanceBtn">Perbarui</button>
                </div>
            </div>
        </div>

        <!-- View Performance Modal -->
        <div class="modal" id="viewPerformanceModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Detail Evaluasi Kinerja</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Karyawan</label>
                        <div class="form-control-static" id="viewPerfEmpName"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Periode</label>
                            <div class="form-control-static" id="viewPerfPeriod"></div>
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <div class="form-control-static" id="viewPerfStatus"></div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Nilai</label>
                            <div class="form-control-static" id="viewPerfScore"></div>
                        </div>
                        <div class="form-group">
                            <label>Tanggal Evaluasi</label>
                            <div class="form-control-static" id="viewPerfDate"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Komentar</label>
                        <div class="form-control-static" id="viewPerfComments"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary modal-close">Tutup</button>
                </div>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div class="modal" id="confirmModal">
            <div class="modal-content" style="max-width: 400px;">
                <div class="modal-header">
                    <h3 id="confirmTitle">Konfirmasi</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p id="confirmMessage">Apakah Anda yakin ingin menghapus data ini?</p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger modal-close">Batal</button>
                    <button class="btn btn-primary" id="confirmAction">Ya, Lanjutkan</button>
                </div>
            </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Initialize data
                initializeData();
                
                // Sidebar toggle for mobile
                const menuToggle = document.getElementById('menuToggle');
                const sidebar = document.getElementById('sidebar');
                
                menuToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('active');
                });

                // Main menu navigation
                const menuItems = document.querySelectorAll('.menu-item');
                const tabContents = document.querySelectorAll('.tab-content');
                const pageTitle = document.getElementById('pageTitle');
                
                menuItems.forEach(item => {
                    item.addEventListener('click', function(e) {
                        e.preventDefault();
                        
                        // Remove active class from all menu items
                        menuItems.forEach(i => i.classList.remove('active'));
                        
                        // Add active class to clicked menu item
                        this.classList.add('active');
                        
                        // Get the tab to show
                        const tabId = this.getAttribute('data-tab');
                        
                        // Hide all tab contents
                        tabContents.forEach(content => content.classList.remove('active'));
                        
                        // Show the selected tab content
                        document.getElementById(tabId).classList.add('active');
                        
                        // Update page title
                        pageTitle.textContent = this.querySelector('span').textContent;
                        
                        // Close sidebar on mobile after clicking a menu item
                        if (window.innerWidth <= 576) {
                            sidebar.classList.remove('active');
                        }
                        
                        // Refresh data for the tab
                        refreshTabData(tabId);
                    });
                });

                // Sub-tabs navigation
                const subTabs = document.querySelectorAll('.tab[data-subtab]');
                
                subTabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        // Remove active class from all sub tabs
                        const parentTabs = this.closest('.tabs');
                        parentTabs.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                        
                        // Add active class to clicked sub tab
                        this.classList.add('active');
                        
                        // Get the subtab to show
                        const subtabId = this.getAttribute('data-subtab');
                        
                        // Get all subtab contents in the current main tab
                        const currentMainTab = this.closest('.tab-content');
                        const subtabContents = currentMainTab.querySelectorAll('.tab-content');
                        
                        // Hide all subtab contents in the current main tab
                        subtabContents.forEach(content => content.classList.remove('active'));
                        
                        // Show the selected subtab content
                        currentMainTab.querySelector(`#${subtabId}`).classList.add('active');
                        
                        // Refresh data for the subtab
                        refreshSubTabData(currentMainTab.id, subtabId);
                    });
                });

                // Modal functionality
                const modals = document.querySelectorAll('.modal');
                const modalCloseBtns = document.querySelectorAll('.modal-close');
                
                // Close modal
                modalCloseBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const modal = this.closest('.modal');
                        modal.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    });
                });
                
                // Close modal when clicking outside
                window.addEventListener('click', function(e) {
                    if (e.target.classList.contains('modal')) {
                        e.target.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                });

                // Alert close buttons
                document.querySelectorAll('.alert-close').forEach(btn => {
                    btn.addEventListener('click', function() {
                        this.closest('.alert').classList.add('d-none');
                    });
                });

                // Export report button
                document.getElementById('exportReportBtn').addEventListener('click', function() {
                    showAlert('dashboardAlert', 'Laporan berhasil diekspor!', 'success');
                });

                // Add Employee buttons
                document.getElementById('addEmployeeBtn').addEventListener('click', openAddEmployeeModal);
                document.getElementById('addEmployeeBtn2').addEventListener('click', openAddEmployeeModal);
                
                // Save Employee button
                document.getElementById('saveEmployeeBtn').addEventListener('click', saveEmployee);
                
                // Update Employee button
                document.getElementById('updateEmployeeBtn').addEventListener('click', updateEmployee);
                
                // Add Attendance button
                document.getElementById('addAttendanceBtn').addEventListener('click', openAddAttendanceModal);
                
                // Save Attendance button
                document.getElementById('saveAttendanceBtn').addEventListener('click', saveAttendance);
                
                // Update Attendance button
                document.getElementById('updateAttendanceBtn').addEventListener('click', updateAttendance);
                
                // Add Leave button
                document.getElementById('addLeaveBtn').addEventListener('click', openAddLeaveModal);
                
                // Save Leave button
                document.getElementById('saveLeaveBtn').addEventListener('click', saveLeave);
                
                // Update Leave button
                document.getElementById('updateLeaveBtn').addEventListener('click', updateLeave);
                
                // Calculate leave duration
                document.getElementById('leaveStartDate').addEventListener('change', calculateLeaveDuration);
                document.getElementById('leaveEndDate').addEventListener('change', calculateLeaveDuration);
                document.getElementById('editLeaveStartDate').addEventListener('change', calculateEditLeaveDuration);
                document.getElementById('editLeaveEndDate').addEventListener('change', calculateEditLeaveDuration);
                
                // Add Payroll button
                document.getElementById('addPayrollBtn').addEventListener('click', openAddPayrollModal);
                
                // Save Payroll button
                document.getElementById('savePayrollBtn').addEventListener('click', savePayroll);
                
                // Add Performance button
                document.getElementById('addPerformanceBtn').addEventListener('click', openAddPerformanceModal);
                
                // Save Performance button
                document.getElementById('savePerformanceBtn').addEventListener('click', savePerformance);
                
                // Update Performance button
                document.getElementById('updatePerformanceBtn').addEventListener('click', updatePerformance);
                
                // Save General Settings button
                document.getElementById('saveGeneralSettings').addEventListener('click', saveGeneralSettings);
                
                // Save Leave Settings button
                document.getElementById('saveLeaveSettings').addEventListener('click', saveLeaveSettings);
                
                // Send Support Request button
                document.getElementById('sendSupportRequest').addEventListener('click', sendSupportRequest);
                
                // Employee search and filter
                document.getElementById('employeeSearch').addEventListener('input', filterEmployees);
                document.getElementById('employeeFilter').addEventListener('change', filterEmployees);
                
                // Attendance search and filter
                document.getElementById('attendanceSearch').addEventListener('input', filterAttendance);
                document.getElementById('attendanceFilter').addEventListener('change', filterAttendance);
                
                // Leave search and filter
                document.getElementById('leaveSearch').addEventListener('input', filterLeave);
                document.getElementById('leaveFilter').addEventListener('change', filterLeave);
                
                // Payroll search and filter
                document.getElementById('payrollSearch').addEventListener('input', filterPayroll);
                document.getElementById('payrollFilter').addEventListener('change', filterPayroll);
                
                // Performance search and filter
                document.getElementById('performanceSearch').addEventListener('input', filterPerformance);
                document.getElementById('performanceFilter').addEventListener('change', filterPerformance);
                
                // Calculate payroll total when employees are selected
                document.getElementById('payrollEmployeeTable').addEventListener('change', function(e) {
                    if (e.target.type === 'checkbox') {
                        calculatePayrollTotal();
                    }
                });

                // Initialize dashboard data
                updateDashboardStats();
                
                // Load initial data
                loadEmployees();
                loadAttendance();
                loadLeave();
                loadPayroll();
                loadPerformance();
                loadSettings();
            });

            // Data storage functions
            function initializeData() {
                // Initialize data in local storage if not exists
                if (!localStorage.getItem('hris_employees')) {
                    const sampleEmployees = [
                        {
                           
                        },
                        {
                            
                        },
                        {
                            
                        },
                        {
                           
                        },
                        {
                            
                        }
                    ];
                    localStorage.setItem('hris_employees', JSON.stringify(sampleEmployees));
                }

                if (!localStorage.getItem('hris_attendance')) {
                    const today = new Date();
                    const yesterday = new Date();
                    yesterday.setDate(today.getDate() - 1);
                    
                    const sampleAttendance = [
                        {
                            id: 'ATT-' + Math.random().toString(36).substr(2, 8).toUpperCase(),
                            empId: 'EMP-0142',
                            date: formatDate(today),
                            clockIn: '08:00',
                            clockOut: '17:00',
                            status: 'Hadir',
                            notes: ''
                        },
                        {
                            id: 'ATT-' + Math.random().toString(36).substr(2, 8).toUpperCase(),
                            empId: 'EMP-0141',
                            date: formatDate(today),
                            clockIn: '08:15',
                            clockOut: '17:30',
                            status: 'Hadir',
                            notes: 'Terlambat 15 menit'
                        },
                        {
                            id: 'ATT-' + Math.random().toString(36).substr(2, 8).toUpperCase(),
                            empId: 'EMP-0140',
                            date: formatDate(today),
                            clockIn: '',
                            clockOut: '',
                            status: 'Izin',
                            notes: 'Acara keluarga'
                        },
                        {
                            id: 'ATT-' + Math.random().toString(36).substr(2, 8).toUpperCase(),
                            empId: 'EMP-0139',
                            date: formatDate(yesterday),
                            clockIn: '',
                            clockOut: '',
                            status: 'Sakit',
                            notes: 'Mengirim surat dokter'
                        },
                        {
                            id: 'ATT-' + Math.random().toString(36).substr(2, 8).toUpperCase(),
                            empId: 'EMP-0138',
                            date: formatDate(yesterday),
                            clockIn: '08:05',
                            clockOut: '17:10',
                            status: 'Hadir',
                            notes: ''
                        }
                    ];
                    localStorage.setItem('hris_attendance', JSON.stringify(sampleAttendance));
                }

                if (!localStorage.getItem('hris_leave')) {
                    const sampleLeave = [
                        {
                           
                        },
                        {
                            
                        },
                        {
                            '
                        },
                        {
                            
                        }
                    ];
                    localStorage.setItem('hris_leave', JSON.stringify(sampleLeave));
                }

                if (!localStorage.getItem('hris_payroll')) {
                    const samplePayroll = [
                        {
                            
                        },
                        {
                            
                        },
                        {
                            
                        }
                    ];
                    localStorage.setItem('hris_payroll', JSON.stringify(samplePayroll));
                }

                if (!localStorage.getItem('hris_performance')) {
                    const samplePerformance = [
                        {
                            
                        },
                        {
                            
                        },
                        {
                            
                        },
                        {
                            
                        }
                    ];
                    localStorage.setItem('hris_performance', JSON.stringify(samplePerformance));
                }

                if (!localStorage.getItem('hris_settings')) {
                    const sampleSettings = {
                        companyName: 'PT.PRIMANSAH',
                        workingDays: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
                        workingHours: '08:00 - 17:00',
                        annualLeave: 12,
                        sickLeave: 14,
                        marriageLeave: 3,
                        maternityLeave: 90
                    };
                    localStorage.setItem('hris_settings', JSON.stringify(sampleSettings));
                }
            }

            function loadSettings() {
                const settings = JSON.parse(localStorage.getItem('hris_settings')) || {};
                
                document.getElementById('companyName').value = settings.companyName || '';
                document.getElementById('workingHours').value = settings.workingHours || '';
                
                // Select working days
                const workingDaysSelect = document.getElementById('workingDays');
                if (settings.workingDays) {
                    Array.from(workingDaysSelect.options).forEach(option => {
                        if (settings.workingDays.includes(option.value)) {
                            option.selected = true;
                        }
                    });
                }
                
                document.getElementById('annualLeave').value = settings.annualLeave || '';
                document.getElementById('sickLeave').value = settings.sickLeave || '';
                document.getElementById('marriageLeave').value = settings.marriageLeave || '';
                document.getElementById('maternityLeave').value = settings.maternityLeave || '';
            }

            function saveGeneralSettings() {
                const settings = JSON.parse(localStorage.getItem('hris_settings')) || {};
                
                settings.companyName = document.getElementById('companyName').value;
                settings.workingHours = document.getElementById('workingHours').value;
                
                // Get selected working days
                const workingDaysSelect = document.getElementById('workingDays');
                settings.workingDays = Array.from(workingDaysSelect.selectedOptions).map(option => option.value);
                
                localStorage.setItem('hris_settings', JSON.stringify(settings));
                showAlert('settingsAlert', 'Pengaturan umum berhasil disimpan!', 'success');
            }

            function saveLeaveSettings() {
                const settings = JSON.parse(localStorage.getItem('hris_settings')) || {};
                
                settings.annualLeave = parseInt(document.getElementById('annualLeave').value) || 0;
                settings.sickLeave = parseInt(document.getElementById('sickLeave').value) || 0;
                settings.marriageLeave = parseInt(document.getElementById('marriageLeave').value) || 0;
                settings.maternityLeave = parseInt(document.getElementById('maternityLeave').value) || 0;
                
                localStorage.setItem('hris_settings', JSON.stringify(settings));
                showAlert('settingsAlert', 'Pengaturan cuti berhasil disimpan!', 'success');
            }

            function sendSupportRequest() {
                const subject = document.getElementById('supportSubject').value;
                const message = document.getElementById('supportMessage').value;
                
                if (!subject || !message) {
                    alert('Harap isi subjek dan pesan!');
                    return;
                }
                
                // In a real app, this would send to a server
                console.log('Support request sent:', { subject, message });
                alert('Permintaan bantuan telah dikirim! Tim support akan segera menghubungi Anda.');
                
                // Clear form
                document.getElementById('supportSubject').value = '';
                document.getElementById('supportMessage').value = '';
            }

            // Employee functions
            function loadEmployees() {
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                renderEmployeesTable(employees, 'allEmployeesTable');
                renderEmployeesTable(employees.filter(e => e.status === 'Active'), 'activeEmployeesTable');
                renderEmployeesTable(employees.filter(e => e.status === 'Inactive'), 'inactiveEmployeesTable');
                renderRecentEmployees(employees);
                updateDashboardStats();
            }

            function renderEmployeesTable(employees, tableId) {
                const tableBody = document.querySelector(`#${tableId} tbody`);
                tableBody.innerHTML = '';
                
                employees.forEach(employee => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${employee.id}</td>
                        <td>
                            <div class="user-profile">
                                <img src="${employee.photo || 'https://via.placeholder.com/30'}" alt="User" width="30">
                                <span>${employee.firstName} ${employee.lastName}</span>
                            </div>
                        </td>
                        <td>${employee.position}</td>
                        <td>${employee.department}</td>
                        <td>${formatDate(employee.joinDate)}</td>
                        <td><span class="status ${getStatusClass(employee.status)}">${employee.status}</span></td>
                        <td>
                            <button class="action-btn btn-primary view-employee" data-id="${employee.id}"><i class="fas fa-eye"></i></button>
                            <button class="action-btn btn-primary edit-employee" data-id="${employee.id}"><i class="fas fa-edit"></i></button>
                            <button class="action-btn btn-danger delete-employee" data-id="${employee.id}"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
                
                // Add event listeners to buttons
                document.querySelectorAll(`#${tableId} .view-employee`).forEach(btn => {
                    btn.addEventListener('click', function() {
                        viewEmployee(this.getAttribute('data-id'));
                    });
                });
                
                document.querySelectorAll(`#${tableId} .edit-employee`).forEach(btn => {
                    btn.addEventListener('click', function() {
                        openEditEmployeeModal(this.getAttribute('data-id'));
                    });
                });
                
                document.querySelectorAll(`#${tableId} .delete-employee`).forEach(btn => {
                    btn.addEventListener('click', function() {
                        confirmDelete('employee', this.getAttribute('data-id'));
                    });
                });
                
                // Update pagination
                updatePagination(tableId, employees.length);
            }

            function renderRecentEmployees(employees) {
                const tableBody = document.querySelector('#recentEmployeesTable tbody');
                tableBody.innerHTML = '';
                
                // Sort by join date (newest first)
                const recentEmployees = [...employees]
                    .sort((a, b) => new Date(b.joinDate) - new Date(a.joinDate))
                    .slice(0, 4);
                
                recentEmployees.forEach(employee => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${employee.id}</td>
                        <td>
                            <div class="user-profile">
                                <img src="${employee.photo || 'https://via.placeholder.com/30'}" alt="User" width="30">
                                <span>${employee.firstName} ${employee.lastName}</span>
                            </div>
                        </td>
                        <td>${employee.position}</td>
                        <td>${employee.department}</td>
                        <td>${formatDate(employee.joinDate)}</td>
                        <td><span class="status ${getStatusClass(employee.status)}">${employee.status}</span></td>
                        <td>
                            <button class="action-btn btn-primary view-employee" data-id="${employee.id}"><i class="fas fa-eye"></i></button>
                            <button class="action-btn btn-primary edit-employee" data-id="${employee.id}"><i class="fas fa-edit"></i></button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
                
                // Add event listeners to buttons
                document.querySelectorAll('#recentEmployeesTable .view-employee').forEach(btn => {
                    btn.addEventListener('click', function() {
                        viewEmployee(this.getAttribute('data-id'));
                    });
                });
                
                document.querySelectorAll('#recentEmployeesTable .edit-employee').forEach(btn => {
                    btn.addEventListener('click', function() {
                        openEditEmployeeModal(this.getAttribute('data-id'));
                    });
                });
            }

            function openAddEmployeeModal() {
                // Clear form
                document.getElementById('employeeForm').reset();
                
                // Generate new employee ID
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const lastId = employees.length > 0 ? parseInt(employees[employees.length - 1].id.split('-')[1]) : 142;
                document.getElementById('empFirstName').value = '';
                document.getElementById('empLastName').value = '';
                document.getElementById('empEmail').value = '';
                document.getElementById('empPhone').value = '';
                document.getElementById('empPosition').value = '';
                document.getElementById('empDepartment').value = '';
                document.getElementById('empJoinDate').value = '';
                document.getElementById('empStatus').value = 'Active';
                document.getElementById('empSalary').value = '';
                document.getElementById('empAddress').value = '';
                
                // Open modal
                document.getElementById('addEmployeeModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }

            function openEditEmployeeModal(employeeId) {
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const employee = employees.find(e => e.id === employeeId);
                
                if (employee) {
                    document.getElementById('editEmpId').value = employee.id;
                    document.getElementById('editEmpFirstName').value = employee.firstName;
                    document.getElementById('editEmpLastName').value = employee.lastName;
                    document.getElementById('editEmpEmail').value = employee.email;
                    document.getElementById('editEmpPhone').value = employee.phone || '';
                    document.getElementById('editEmpPosition').value = employee.position;
                    document.getElementById('editEmpDepartment').value = employee.department;
                    document.getElementById('editEmpJoinDate').value = employee.joinDate;
                    document.getElementById('editEmpStatus').value = employee.status;
                    document.getElementById('editEmpSalary').value = employee.salary || '';
                    document.getElementById('editEmpAddress').value = employee.address || '';
                    
                    // Show current photo
                    const currentPhoto = document.getElementById('currentPhoto');
                    currentPhoto.innerHTML = '';
                    if (employee.photo) {
                        const img = document.createElement('img');
                        img.src = employee.photo;
                        img.alt = 'Current Photo';
                        img.width = 80;
                        img.classList.add('rounded');
                        currentPhoto.appendChild(img);
                    }
                    
                    // Open modal
                    document.getElementById('editEmployeeModal').style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                }
            }

            function viewEmployee(employeeId) {
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const employee = employees.find(e => e.id === employeeId);
                
                if (employee) {
                    document.getElementById('viewEmpId').textContent = employee.id;
                    document.getElementById('viewEmpName').textContent = `${employee.firstName} ${employee.lastName}`;
                    document.getElementById('viewEmpEmail').textContent = employee.email;
                    document.getElementById('viewEmpPhone').textContent = employee.phone || '-';
                    document.getElementById('viewEmpPosition').textContent = employee.position;
                    document.getElementById('viewEmpDepartment').textContent = employee.department;
                    document.getElementById('viewEmpJoinDate').textContent = formatDate(employee.joinDate);
                    document.getElementById('viewEmpStatus').textContent = employee.status;
                    document.getElementById('viewEmpSalary').textContent = employee.salary ? formatCurrency(employee.salary) : '-';
                    document.getElementById('viewEmpAddress').textContent = employee.address || '-';
                    
                    // Set photo
                    const photo = document.getElementById('viewEmpPhoto');
                    photo.src = employee.photo || 'https://via.placeholder.com/120';
                    photo.alt = `${employee.firstName} ${employee.lastName}`;
                    
                    // Open modal
                    document.getElementById('viewEmployeeModal').style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                }
            }

            function saveEmployee() {
                const form = document.getElementById('employeeForm');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const lastId = employees.length > 0 ? parseInt(employees[employees.length - 1].id.split('-')[1]) : 142;
                const newId = 'EMP-' + (lastId + 1).toString().padStart(4, '0');
                
                const newEmployee = {
                    id: newId,
                    firstName: document.getElementById('empFirstName').value,
                    lastName: document.getElementById('empLastName').value,
                    email: document.getElementById('empEmail').value,
                    phone: document.getElementById('empPhone').value || '',
                    position: document.getElementById('empPosition').value,
                    department: document.getElementById('empDepartment').value,
                    joinDate: document.getElementById('empJoinDate').value,
                    status: document.getElementById('empStatus').value,
                    salary: parseInt(document.getElementById('empSalary').value) || 0,
                    address: document.getElementById('empAddress').value || '',
                    photo: '' + 
                          (Math.random() > 0.5 ? 'men' : 'women') + 
                          '/' + Math.floor(Math.random() * 50) + '.jpg'
                };
                
                employees.push(newEmployee);
                localStorage.setItem('hris_employees', JSON.stringify(employees));
                
                // Close modal
                document.getElementById('addEmployeeModal').style.display = 'none';
                document.body.style.overflow = 'auto';
                
                // Refresh tables
                loadEmployees();
                showAlert('employeeAlert', 'Data karyawan berhasil ditambahkan!', 'success');
            }

            function updateEmployee() {
                const form = document.getElementById('editEmployeeForm');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const employeeId = document.getElementById('editEmpId').value;
                const employeeIndex = employees.findIndex(e => e.id === employeeId);
                
                if (employeeIndex !== -1) {
                    employees[employeeIndex] = {
                        ...employees[employeeIndex],
                        firstName: document.getElementById('editEmpFirstName').value,
                        lastName: document.getElementById('editEmpLastName').value,
                        email: document.getElementById('editEmpEmail').value,
                        phone: document.getElementById('editEmpPhone').value || '',
                        position: document.getElementById('editEmpPosition').value,
                        department: document.getElementById('editEmpDepartment').value,
                        joinDate: document.getElementById('editEmpJoinDate').value,
                        status: document.getElementById('editEmpStatus').value,
                        salary: parseInt(document.getElementById('editEmpSalary').value) || 0,
                        address: document.getElementById('editEmpAddress').value || ''
                        // Note: Photo update would require file upload handling
                    };
                    
                    localStorage.setItem('hris_employees', JSON.stringify(employees));
                    
                    // Close modal
                    document.getElementById('editEmployeeModal').style.display = 'none';
                    document.body.style.overflow = 'auto';
                    
                    // Refresh tables
                    loadEmployees();
                    showAlert('employeeAlert', 'Data karyawan berhasil diperbarui!', 'success');
                }
            }

            function deleteEmployee(employeeId) {
                let employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                employees = employees.filter(e => e.id !== employeeId);
                localStorage.setItem('hris_employees', JSON.stringify(employees));
                
                // Refresh tables
                loadEmployees();
                showAlert('employeeAlert', 'Data karyawan berhasil dihapus!', 'success');
            }

            function filterEmployees() {
                const searchTerm = document.getElementById('employeeSearch').value.toLowerCase();
                const departmentFilter = document.getElementById('employeeFilter').value;
                
                let employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                
                // Apply filters
                if (searchTerm) {
                    employees = employees.filter(e => 
                        e.firstName.toLowerCase().includes(searchTerm) || 
                        e.lastName.toLowerCase().includes(searchTerm) ||
                        e.id.toLowerCase().includes(searchTerm) ||
                        e.position.toLowerCase().includes(searchTerm)
                    );
                }
                
                if (departmentFilter) {
                    employees = employees.filter(e => e.department === departmentFilter);
                }
                
                // Render filtered results
                renderEmployeesTable(employees, 'allEmployeesTable');
            }

            // Attendance functions
            function loadAttendance() {
                const attendance = JSON.parse(localStorage.getItem('hris_attendance')) || [];
                renderAttendanceTable(attendance, 'attendanceTable');
                updateDashboardStats();
                renderAttendanceSummary();
            }

            function renderAttendanceTable(attendance, tableId) {
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const tableBody = document.querySelector(`#${tableId} tbody`);
                tableBody.innerHTML = '';
                
                attendance.forEach(record => {
                    const employee = employees.find(e => e.id === record.empId);
                    const employeeName = employee ? `${employee.firstName} ${employee.lastName}` : 'Unknown';
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${formatDate(record.date)}</td>
                        <td>${employeeName}</td>
                        <td>${record.clockIn || '-'}</td>
                        <td>${record.clockOut || '-'}</td>
                        <td><span class="status ${getStatusClass(record.status)}">${record.status}</span></td>
                        <td>${record.notes || '-'}</td>
                        <td>
                            <button class="action-btn btn-primary edit-attendance" data-id="${record.id}"><i class="fas fa-edit"></i></button>
                            <button class="action-btn btn-danger delete-attendance" data-id="${record.id}"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
                
                // Add event listeners to buttons
                document.querySelectorAll(`#${tableId} .edit-attendance`).forEach(btn => {
                    btn.addEventListener('click', function() {
                        openEditAttendanceModal(this.getAttribute('data-id'));
                    });
                });
                
                document.querySelectorAll(`#${tableId} .delete-attendance`).forEach(btn => {
                    btn.addEventListener('click', function() {
                        confirmDelete('attendance', this.getAttribute('data-id'));
                    });
                });
                
                // Update pagination
                updatePagination(tableId, attendance.length);
            }

            function renderAttendanceSummary() {
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const attendance = JSON.parse(localStorage.getItem('hris_attendance')) || [];
                
                // Get current month and year
                const now = new Date();
                const currentMonth = now.getMonth() + 1;
                const currentYear = now.getFullYear();
                
                // Filter attendance for current month
                const monthAttendance = attendance.filter(record => {
                    const recordDate = new Date(record.date);
                    return recordDate.getMonth() + 1 === currentMonth && 
                           recordDate.getFullYear() === currentYear;
                });
                
                // Group by department
                const departments = [...new Set(employees.map(e => e.department))];
                const summary = [];
                
                departments.forEach(dept => {
                    const deptEmployees = employees.filter(e => e.department === dept);
                    const deptAttendance = monthAttendance.filter(record => 
                        deptEmployees.some(e => e.id === record.empId)
                    );
                    
                    const present = deptAttendance.filter(r => r.status === 'Hadir').length;
                    const sick = deptAttendance.filter(r => r.status === 'Sakit').length;
                    const leave = deptAttendance.filter(r => r.status === 'Cuti').length;
                    const permission = deptAttendance.filter(r => r.status === 'Izin').length;
                    const absent = deptEmployees.length * (new Date().getDate()) - (present + sick + leave + permission);
                    
                    const percentage = Math.round((present / (deptEmployees.length * new Date().getDate())) * 100);
                    
                    summary.push({
                        department: dept,
                        totalEmployees: deptEmployees.length,
                        present,
                        permission,
                        sick,
                        leave,
                        absent: absent > 0 ? absent : 0,
                        percentage: percentage + '%'
                    });
                });
                
                // Render summary table
                const tableBody = document.querySelector('#attendanceSummaryTable tbody');
                tableBody.innerHTML = '';
                
                summary.forEach(item => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${item.department}</td>
                        <td>${item.totalEmployees}</td>
                        <td>${item.present}</td>
                        <td>${item.permission}</td>
                        <td>${item.sick}</td>
                        <td>${item.leave}</td>
                        <td>${item.absent}</td>
                        <td>${item.percentage}</td>
                    `;
                    tableBody.appendChild(row);
                });
            }

            function openAddAttendanceModal() {
                // Clear form
                document.getElementById('attendanceForm').reset();
                
                // Populate employee dropdown
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const empSelect = document.getElementById('attEmpId');
                empSelect.innerHTML = '<option value="">Pilih Karyawan</option>';
                
                employees.forEach(employee => {
                    if (employee.status === 'Active') {
                        const option = document.createElement('option');
                        option.value = employee.id;
                        option.textContent = `${employee.firstName} ${employee.lastName} (${employee.position})`;
                        empSelect.appendChild(option);
                    }
                });
                
                // Set default date to today
                document.getElementById('attDate').value = formatDate(new Date());
                
                // Open modal
                document.getElementById('addAttendanceModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }

            function openEditAttendanceModal(attendanceId) {
                const attendance = JSON.parse(localStorage.getItem('hris_attendance')) || [];
                const record = attendance.find(a => a.id === attendanceId);
                
                if (record) {
                    const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                    const employee = employees.find(e => e.id === record.empId);
                    
                    document.getElementById('editAttId').value = record.id;
                    document.getElementById('editAttEmpName').textContent = employee ? 
                        `${employee.firstName} ${employee.lastName} (${employee.position})` : 'Unknown';
                    document.getElementById('editAttDate').value = record.date;
                    document.getElementById('editAttClockIn').value = record.clockIn || '';
                    document.getElementById('editAttClockOut').value = record.clockOut || '';
                    document.getElementById('editAttStatus').value = record.status;
                    document.getElementById('editAttNotes').value = record.notes || '';
                    
                    // Open modal
                    document.getElementById('editAttendanceModal').style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                }
            }

            function saveAttendance() {
                const form = document.getElementById('attendanceForm');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const attendance = JSON.parse(localStorage.getItem('hris_attendance')) || [];
                const newId = 'ATT-' + Math.random().toString(36).substr(2, 8).toUpperCase();
                
                const newAttendance = {
                    id: newId,
                    empId: document.getElementById('attEmpId').value,
                    date: document.getElementById('attDate').value,
                    clockIn: document.getElementById('attClockIn').value || '',
                    clockOut: document.getElementById('attClockOut').value || '',
                    status: document.getElementById('attStatus').value,
                    notes: document.getElementById('attNotes').value || ''
                };
                
                attendance.push(newAttendance);
                localStorage.setItem('hris_attendance', JSON.stringify(attendance));
                
                // Close modal
                document.getElementById('addAttendanceModal').style.display = 'none';
                document.body.style.overflow = 'auto';
                
                // Refresh tables
                loadAttendance();
                showAlert('attendanceAlert', 'Data kehadiran berhasil ditambahkan!', 'success');
            }

            function updateAttendance() {
                const form = document.getElementById('editAttendanceForm');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const attendance = JSON.parse(localStorage.getItem('hris_attendance')) || [];
                const recordId = document.getElementById('editAttId').value;
                const recordIndex = attendance.findIndex(a => a.id === recordId);
                
                if (recordIndex !== -1) {
                    attendance[recordIndex] = {
                        ...attendance[recordIndex],
                        date: document.getElementById('editAttDate').value,
                        clockIn: document.getElementById('editAttClockIn').value || '',
                        clockOut: document.getElementById('editAttClockOut').value || '',
                        status: document.getElementById('editAttStatus').value,
                        notes: document.getElementById('editAttNotes').value || ''
                    };
                    
                    localStorage.setItem('hris_attendance', JSON.stringify(attendance));
                    
                    // Close modal
                    document.getElementById('editAttendanceModal').style.display = 'none';
                    document.body.style.overflow = 'auto';
                    
                    // Refresh tables
                    loadAttendance();
                    showAlert('attendanceAlert', 'Data kehadiran berhasil diperbarui!', 'success');
                }
            }

            function deleteAttendance(attendanceId) {
                let attendance = JSON.parse(localStorage.getItem('hris_attendance')) || [];
                attendance = attendance.filter(a => a.id !== attendanceId);
                localStorage.setItem('hris_attendance', JSON.stringify(attendance));
                
                // Refresh tables
                loadAttendance();
                showAlert('attendanceAlert', 'Data kehadiran berhasil dihapus!', 'success');
            }

            function filterAttendance() {
                const searchTerm = document.getElementById('attendanceSearch').value.toLowerCase();
                const statusFilter = document.getElementById('attendanceFilter').value;
                
                let attendance = JSON.parse(localStorage.getItem('hris_attendance')) || [];
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                
                // Apply filters
                if (searchTerm) {
                    attendance = attendance.filter(record => {
                        const employee = employees.find(e => e.id === record.empId);
                        if (!employee) return false;
                        
                        return (
                            employee.firstName.toLowerCase().includes(searchTerm) || 
                            employee.lastName.toLowerCase().includes(searchTerm) ||
                            employee.position.toLowerCase().includes(searchTerm) ||
                            formatDate(record.date).toLowerCase().includes(searchTerm)
                        );
                    });
                }
                
                if (statusFilter) {
                    attendance = attendance.filter(record => record.status === statusFilter);
                }
                
                // Render filtered results
                renderAttendanceTable(attendance, 'attendanceTable');
            }

            // Leave functions
            function loadLeave() {
                const leave = JSON.parse(localStorage.getItem('hris_leave')) || [];
                renderLeaveTable(leave, 'allLeaveTable');
                renderLeaveTable(leave.filter(l => l.status === 'Menunggu'), 'pendingLeaveTable');
                renderLeaveTable(leave.filter(l => l.status === 'Disetujui'), 'approvedLeaveTable');
                renderLeaveTable(leave.filter(l => l.status === 'Ditolak'), 'rejectedLeaveTable');
                updateDashboardStats();
            }

            function renderLeaveTable(leave, tableId) {
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const tableBody = document.querySelector(`#${tableId} tbody`);
                tableBody.innerHTML = '';
                
                leave.forEach(record => {
                    const employee = employees.find(e => e.id === record.empId);
                    const employeeName = employee ? `${employee.firstName} ${employee.lastName}` : 'Unknown';
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${record.id}</td>
                        <td>${employeeName}</td>
                        <td>${record.type}</td>
                        <td>${formatDate(record.startDate)}</td>
                        <td>${formatDate(record.endDate)}</td>
                        <td>${record.duration} hari</td>
                        <td><span class="status ${getStatusClass(record.status)}">${record.status}</span></td>
                        <td>
                            <button class="action-btn btn-primary view-leave" data-id="${record.id}"><i class="fas fa-eye"></i></button>
                            <button class="action-btn btn-primary edit-leave" data-id="${record.id}"><i class="fas fa-edit"></i></button>
                            <button class="action-btn btn-danger delete-leave" data-id="${record.id}"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
                
                // Add event listeners to buttons
                document.querySelectorAll(`#${tableId} .view-leave`).forEach(btn => {
                    btn.addEventListener('click', function() {
                        viewLeave(this.getAttribute('data-id'));
                    });
                });
                
                document.querySelectorAll(`#${tableId} .edit-leave`).forEach(btn => {
                    btn.addEventListener('click', function() {
                        openEditLeaveModal(this.getAttribute('data-id'));
                    });
                });
                
                document.querySelectorAll(`#${tableId} .delete-leave`).forEach(btn => {
                    btn.addEventListener('click', function() {
                        confirmDelete('leave', this.getAttribute('data-id'));
                    });
                });
                
                // Update pagination
                updatePagination(tableId, leave.length);
            }

            function openAddLeaveModal() {
                // Clear form
                document.getElementById('leaveForm').reset();
                
                // Populate employee dropdown
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const empSelect = document.getElementById('leaveEmpId');
                empSelect.innerHTML = '<option value="">Pilih Karyawan</option>';
                
                employees.forEach(employee => {
                    if (employee.status === 'Active') {
                        const option = document.createElement('option');
                        option.value = employee.id;
                        option.textContent = `${employee.firstName} ${employee.lastName} (${employee.position})`;
                        empSelect.appendChild(option);
                    }
                });
                
                // Set default status to "Menunggu"
                document.getElementById('leaveStatus').value = 'Menunggu';
                
                // Open modal
                document.getElementById('addLeaveModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }

            function openEditLeaveModal(leaveId) {
                const leave = JSON.parse(localStorage.getItem('hris_leave')) || [];
                const record = leave.find(l => l.id === leaveId);
                
                if (record) {
                    const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                    const employee = employees.find(e => e.id === record.empId);
                    
                    document.getElementById('editLeaveId').value = record.id;
                    document.getElementById('editLeaveEmpName').textContent = employee ? 
                        `${employee.firstName} ${employee.lastName} (${employee.position})` : 'Unknown';
                    document.getElementById('editLeaveType').value = record.type;
                    document.getElementById('editLeaveStartDate').value = record.startDate;
                    document.getElementById('editLeaveEndDate').value = record.endDate;
                    document.getElementById('editLeaveDuration').value = record.duration;
                    document.getElementById('editLeaveReason').value = record.reason;
                    document.getElementById('editLeaveStatus').value = record.status;
                    
                    // Open modal
                    document.getElementById('editLeaveModal').style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                }
            }

            function viewLeave(leaveId) {
                const leave = JSON.parse(localStorage.getItem('hris_leave')) || [];
                const record = leave.find(l => l.id === leaveId);
                
                if (record) {
                    const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                    const employee = employees.find(e => e.id === record.empId);
                    
                    document.getElementById('viewLeaveId').textContent = record.id;
                    document.getElementById('viewLeaveEmpName').textContent = employee ? 
                        `${employee.firstName} ${employee.lastName}` : 'Unknown';
                    document.getElementById('viewLeaveType').textContent = record.type;
                    document.getElementById('viewLeaveStartDate').textContent = formatDate(record.startDate);
                    document.getElementById('viewLeaveEndDate').textContent = formatDate(record.endDate);
                    document.getElementById('viewLeaveDuration').textContent = record.duration + ' hari';
                    document.getElementById('viewLeaveReason').textContent = record.reason;
                    document.getElementById('viewLeaveStatus').textContent = record.status;
                    
                    // Open modal
                    document.getElementById('viewLeaveModal').style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                }
            }

            function saveLeave() {
                const form = document.getElementById('leaveForm');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const leave = JSON.parse(localStorage.getItem('hris_leave')) || [];
                const newId = 'LV-' + (leave.length + 1000).toString().padStart(4, '0');
                
                const newLeave = {
                    id: newId,
                    empId: document.getElementById('leaveEmpId').value,
                    type: document.getElementById('leaveType').value,
                    startDate: document.getElementById('leaveStartDate').value,
                    endDate: document.getElementById('leaveEndDate').value,
                    duration: parseInt(document.getElementById('leaveDuration').value) || 0,
                    reason: document.getElementById('leaveReason').value,
                    status: document.getElementById('leaveStatus').value,
                    appliedDate: formatDate(new Date())
                };
                
                leave.push(newLeave);
                localStorage.setItem('hris_leave', JSON.stringify(leave));
                
                // Close modal
                document.getElementById('addLeaveModal').style.display = 'none';
                document.body.style.overflow = 'auto';
                
                // Refresh tables
                loadLeave();
                showAlert('leaveAlert', 'Pengajuan cuti berhasil ditambahkan!', 'success');
            }

            function updateLeave() {
                const form = document.getElementById('editLeaveForm');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const leave = JSON.parse(localStorage.getItem('hris_leave')) || [];
                const recordId = document.getElementById('editLeaveId').value;
                const recordIndex = leave.findIndex(l => l.id === recordId);
                
                if (recordIndex !== -1) {
                    leave[recordIndex] = {
                        ...leave[recordIndex],
                        type: document.getElementById('editLeaveType').value,
                        startDate: document.getElementById('editLeaveStartDate').value,
                        endDate: document.getElementById('editLeaveEndDate').value,
                        duration: parseInt(document.getElementById('editLeaveDuration').value) || 0,
                        reason: document.getElementById('editLeaveReason').value,
                        status: document.getElementById('editLeaveStatus').value
                    };
                    
                    localStorage.setItem('hris_leave', JSON.stringify(leave));
                    
                    // Close modal
                    document.getElementById('editLeaveModal').style.display = 'none';
                    document.body.style.overflow = 'auto';
                    
                    // Refresh tables
                    loadLeave();
                    showAlert('leaveAlert', 'Pengajuan cuti berhasil diperbarui!', 'success');
                }
            }

            function deleteLeave(leaveId) {
                let leave = JSON.parse(localStorage.getItem('hris_leave')) || [];
                leave = leave.filter(l => l.id !== leaveId);
                localStorage.setItem('hris_leave', JSON.stringify(leave));
                
                // Refresh tables
                loadLeave();
                showAlert('leaveAlert', 'Pengajuan cuti berhasil dihapus!', 'success');
            }

            function calculateLeaveDuration() {
                const startDate = document.getElementById('leaveStartDate').value;
                const endDate = document.getElementById('leaveEndDate').value;
                
                if (startDate && endDate) {
                    const start = new Date(startDate);
                    const end = new Date(endDate);
                    const diffTime = Math.abs(end - start);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;
                    
                    document.getElementById('leaveDuration').value = diffDays;
                }
            }

            function calculateEditLeaveDuration() {
                const startDate = document.getElementById('editLeaveStartDate').value;
                const endDate = document.getElementById('editLeaveEndDate').value;
                
                if (startDate && endDate) {
                    const start = new Date(startDate);
                    const end = new Date(endDate);
                    const diffTime = Math.abs(end - start);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;
                    
                    document.getElementById('editLeaveDuration').value = diffDays;
                }
            }

            function filterLeave() {
                const searchTerm = document.getElementById('leaveSearch').value.toLowerCase();
                const statusFilter = document.getElementById('leaveFilter').value;
                
                let leave = JSON.parse(localStorage.getItem('hris_leave')) || [];
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                
                // Apply filters
                if (searchTerm) {
                    leave = leave.filter(record => {
                        const employee = employees.find(e => e.id === record.empId);
                        if (!employee) return false;
                        
                        return (
                            employee.firstName.toLowerCase().includes(searchTerm) || 
                            employee.lastName.toLowerCase().includes(searchTerm) ||
                            record.type.toLowerCase().includes(searchTerm) ||
                            record.id.toLowerCase().includes(searchTerm)
                        );
                    });
                }
                
                if (statusFilter) {
                    leave = leave.filter(record => record.status === statusFilter);
                }
                
                // Render filtered results
                renderLeaveTable(leave, 'allLeaveTable');
            }

            // Payroll functions
            function loadPayroll() {
                const payroll = JSON.parse(localStorage.getItem('hris_payroll')) || [];
                renderPayrollTable(payroll, 'payrollTable');
                updateDashboardStats();
            }

            function renderPayrollTable(payroll, tableId) {
                const tableBody = document.querySelector(`#${tableId} tbody`);
                tableBody.innerHTML = '';
                
                payroll.forEach(record => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${formatMonthYear(record.period)}</td>
                        <td>${record.employees.length}</td>
                        <td>${formatCurrency(record.total)}</td>
                        <td><span class="status ${getStatusClass(record.status)}">${record.status}</span></td>
                        <td>${formatDate(record.date)}</td>
                        <td>
                            <button class="action-btn btn-primary view-payroll" data-id="${record.id}"><i class="fas fa-eye"></i></button>
                            <button class="action-btn btn-danger delete-payroll" data-id="${record.id}"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
                
                // Add event listeners to buttons
                document.querySelectorAll(`#${tableId} .view-payroll`).forEach(btn => {
                    btn.addEventListener('click', function() {
                        viewPayroll(this.getAttribute('data-id'));
                    });
                });
                
                document.querySelectorAll(`#${tableId} .delete-payroll`).forEach(btn => {
                    btn.addEventListener('click', function() {
                        confirmDelete('payroll', this.getAttribute('data-id'));
                    });
                });
                
                // Update pagination
                updatePagination(tableId, payroll.length);
            }

            function openAddPayrollModal() {
                // Clear form
                document.getElementById('payrollForm').reset();
                
                // Set default date to today
                document.getElementById('payrollDate').value = formatDate(new Date());
                
                // Populate employee table
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const tableBody = document.querySelector('#payrollEmployeeTable tbody');
                tableBody.innerHTML = '';
                
                employees.forEach(employee => {
                    if (employee.status === 'Active') {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td><input type="checkbox" class="payroll-emp-checkbox" value="${employee.id}"></td>
                            <td>${employee.firstName} ${employee.lastName}</td>
                            <td>${employee.position}</td>
                            <td>${formatCurrency(employee.salary || 0)}</td>
                        `;
                        tableBody.appendChild(row);
                    }
                });
                
                // Open modal
                document.getElementById('addPayrollModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }

            function viewPayroll(payrollId) {
                const payroll = JSON.parse(localStorage.getItem('hris_payroll')) || [];
                const record = payroll.find(p => p.id === payrollId);
                
                if (record) {
                    const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                    
                    document.getElementById('viewPayrollPeriod').textContent = formatMonthYear(record.period);
                    document.getElementById('viewPayrollDate').textContent = formatDate(record.date);
                    document.getElementById('viewPayrollEmployeeCount').textContent = record.employees.length;
                    document.getElementById('viewPayrollStatus').textContent = record.status;
                    document.getElementById('viewPayrollTotal').textContent = formatCurrency(record.total);
                    document.getElementById('viewPayrollNotes').textContent = record.notes || '-';
                    
                    // Populate employee list
                    const employeeList = document.getElementById('viewPayrollEmployeeList');
                    employeeList.innerHTML = '';
                    
                    record.employees.forEach(empId => {
                        const employee = employees.find(e => e.id === empId);
                        if (employee) {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${employee.firstName} ${employee.lastName}</td>
                                <td>${employee.position}</td>
                                <td>${formatCurrency(employee.salary || 0)}</td>
                            `;
                            employeeList.appendChild(row);
                        }
                    });
                    
                    // Open modal
                    document.getElementById('viewPayrollModal').style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                }
            }

            function savePayroll() {
                const form = document.getElementById('payrollForm');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                // Get selected employees
                const selectedEmployees = [];
                const checkboxes = document.querySelectorAll('.payroll-emp-checkbox:checked');
                checkboxes.forEach(checkbox => {
                    selectedEmployees.push(checkbox.value);
                });
                
                if (selectedEmployees.length === 0) {
                    alert('Pilih setidaknya satu karyawan!');
                    return;
                }
                
                const payroll = JSON.parse(localStorage.getItem('hris_payroll')) || [];
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                
                // Calculate total salary
                let total = 0;
                selectedEmployees.forEach(empId => {
                    const employee = employees.find(e => e.id === empId);
                    if (employee) {
                        total += employee.salary || 0;
                    }
                });
                
                const newPayroll = {
                    id: 'PY-' + document.getElementById('payrollPeriod').value.replace('-', ''),
                    period: document.getElementById('payrollPeriod').value,
                    date: document.getElementById('payrollDate').value,
                    employees: selectedEmployees,
                    total: total,
                    status: document.getElementById('payrollStatus').value,
                    notes: document.getElementById('payrollNotes').value || ''
                };
                
                payroll.push(newPayroll);
                localStorage.setItem('hris_payroll', JSON.stringify(payroll));
                
                // Close modal
                document.getElementById('addPayrollModal').style.display = 'none';
                document.body.style.overflow = 'auto';
                
                // Refresh tables
                loadPayroll();
                showAlert('payrollAlert', 'Data penggajian berhasil ditambahkan!', 'success');
            }

            function deletePayroll(payrollId) {
                let payroll = JSON.parse(localStorage.getItem('hris_payroll')) || [];
                payroll = payroll.filter(p => p.id !== payrollId);
                localStorage.setItem('hris_payroll', JSON.stringify(payroll));
                
                // Refresh tables
                loadPayroll();
                showAlert('payrollAlert', 'Data penggajian berhasil dihapus!', 'success');
            }

            function calculatePayrollTotal() {
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const checkboxes = document.querySelectorAll('.payroll-emp-checkbox:checked');
                
                let total = 0;
                checkboxes.forEach(checkbox => {
                    const employee = employees.find(e => e.id === checkbox.value);
                    if (employee) {
                        total += employee.salary || 0;
                    }
                });
                
                document.getElementById('payrollTotal').value = formatCurrency(total);
            }

            function filterPayroll() {
                const searchTerm = document.getElementById('payrollSearch').value.toLowerCase();
                const statusFilter = document.getElementById('payrollFilter').value;
                
                let payroll = JSON.parse(localStorage.getItem('hris_payroll')) || [];
                
                // Apply filters
                if (searchTerm) {
                    payroll = payroll.filter(record => 
                        record.period.toLowerCase().includes(searchTerm) ||
                        record.id.toLowerCase().includes(searchTerm)
                    );
                }
                
                if (statusFilter) {
                    payroll = payroll.filter(record => record.status === statusFilter);
                }
                
                // Render filtered results
                renderPayrollTable(payroll, 'payrollTable');
            }

            // Performance functions
            function loadPerformance() {
                const performance = JSON.parse(localStorage.getItem('hris_performance')) || [];
                renderPerformanceTable(performance, 'performanceTable');
            }

            function renderPerformanceTable(performance, tableId) {
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const tableBody = document.querySelector(`#${tableId} tbody`);
                tableBody.innerHTML = '';
                
                performance.forEach(record => {
                    const employee = employees.find(e => e.id === record.empId);
                    const employeeName = employee ? `${employee.firstName} ${employee.lastName}` : 'Unknown';
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${record.period}</td>
                        <td>${employeeName}</td>
                        <td>${employee ? employee.position : '-'}</td>
                        <td>${employee ? employee.department : '-'}</td>
                        <td>${record.score}</td>
                        <td><span class="status ${getStatusClass(record.status)}">${record.status}</span></td>
                        <td>
                            <button class="action-btn btn-primary view-performance" data-id="${record.id}"><i class="fas fa-eye"></i></button>
                            <button class="action-btn btn-primary edit-performance" data-id="${record.id}"><i class="fas fa-edit"></i></button>
                            <button class="action-btn btn-danger delete-performance" data-id="${record.id}"><i class="fas fa-trash"></i></button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
                
                // Add event listeners to buttons
                document.querySelectorAll(`#${tableId} .view-performance`).forEach(btn => {
                    btn.addEventListener('click', function() {
                        viewPerformance(this.getAttribute('data-id'));
                    });
                });
                
                document.querySelectorAll(`#${tableId} .edit-performance`).forEach(btn => {
                    btn.addEventListener('click', function() {
                        openEditPerformanceModal(this.getAttribute('data-id'));
                    });
                });
                
                document.querySelectorAll(`#${tableId} .delete-performance`).forEach(btn => {
                    btn.addEventListener('click', function() {
                        confirmDelete('performance', this.getAttribute('data-id'));
                    });
                });
                
                // Update pagination
                updatePagination(tableId, performance.length);
            }

            function openAddPerformanceModal() {
                // Clear form
                document.getElementById('performanceForm').reset();
                
                // Populate employee dropdown
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const empSelect = document.getElementById('perfEmpId');
                empSelect.innerHTML = '<option value="">Pilih Karyawan</option>';
                
                employees.forEach(employee => {
                    if (employee.status === 'Active') {
                        const option = document.createElement('option');
                        option.value = employee.id;
                        option.textContent = `${employee.firstName} ${employee.lastName} (${employee.position})`;
                        empSelect.appendChild(option);
                    }
                });
                
                // Set default date to today
                document.getElementById('perfStatus').value = 'Selesai';
                
                // Open modal
                document.getElementById('addPerformanceModal').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }

            function openEditPerformanceModal(performanceId) {
                const performance = JSON.parse(localStorage.getItem('hris_performance')) || [];
                const record = performance.find(p => p.id === performanceId);
                
                if (record) {
                    const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                    const employee = employees.find(e => e.id === record.empId);
                    
                    document.getElementById('editPerfId').value = record.id;
                    document.getElementById('editPerfEmpName').textContent = employee ? 
                        `${employee.firstName} ${employee.lastName} (${employee.position})` : 'Unknown';
                    document.getElementById('editPerfPeriod').value = record.period;
                    document.getElementById('editPerfScore').value = record.score;
                    document.getElementById('editPerfStatus').value = record.status;
                    document.getElementById('editPerfComments').value = record.comments || '';
                    
                    // Open modal
                    document.getElementById('editPerformanceModal').style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                }
            }

            function viewPerformance(performanceId) {
                const performance = JSON.parse(localStorage.getItem('hris_performance')) || [];
                const record = performance.find(p => p.id === performanceId);
                
                if (record) {
                    const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                    const employee = employees.find(e => e.id === record.empId);
                    
                    document.getElementById('viewPerfEmpName').textContent = employee ? 
                        `${employee.firstName} ${employee.lastName}` : 'Unknown';
                    document.getElementById('viewPerfPeriod').textContent = record.period;
                    document.getElementById('viewPerfStatus').textContent = record.status;
                    document.getElementById('viewPerfScore').textContent = record.score;
                    document.getElementById('viewPerfDate').textContent = formatDate(record.date);
                    document.getElementById('viewPerfComments').textContent = record.comments || '-';
                    
                    // Open modal
                    document.getElementById('viewPerformanceModal').style.display = 'flex';
                    document.body.style.overflow = 'hidden';
                }
            }

            function savePerformance() {
                const form = document.getElementById('performanceForm');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const performance = JSON.parse(localStorage.getItem('hris_performance')) || [];
                const newId = 'PERF-' + Math.random().toString(36).substr(2, 8).toUpperCase();
                
                const newPerformance = {
                    id: newId,
                    empId: document.getElementById('perfEmpId').value,
                    period: document.getElementById('perfPeriod').value,
                    score: parseFloat(document.getElementById('perfScore').value),
                    status: document.getElementById('perfStatus').value,
                    comments: document.getElementById('perfComments').value || '',
                    date: formatDate(new Date())
                };
                
                performance.push(newPerformance);
                localStorage.setItem('hris_performance', JSON.stringify(performance));
                
                // Close modal
                document.getElementById('addPerformanceModal').style.display = 'none';
                document.body.style.overflow = 'auto';
                
                // Refresh tables
                loadPerformance();
                showAlert('performanceAlert', 'Evaluasi kinerja berhasil ditambahkan!', 'success');
            }

            function updatePerformance() {
                const form = document.getElementById('editPerformanceForm');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const performance = JSON.parse(localStorage.getItem('hris_performance')) || [];
                const recordId = document.getElementById('editPerfId').value;
                const recordIndex = performance.findIndex(p => p.id === recordId);
                
                if (recordIndex !== -1) {
                    performance[recordIndex] = {
                        ...performance[recordIndex],
                        period: document.getElementById('editPerfPeriod').value,
                        score: parseFloat(document.getElementById('editPerfScore').value),
                        status: document.getElementById('editPerfStatus').value,
                        comments: document.getElementById('editPerfComments').value || ''
                    };
                    
                    localStorage.setItem('hris_performance', JSON.stringify(performance));
                    
                    // Close modal
                    document.getElementById('editPerformanceModal').style.display = 'none';
                    document.body.style.overflow = 'auto';
                    
                    // Refresh tables
                    loadPerformance();
                    showAlert('performanceAlert', 'Evaluasi kinerja berhasil diperbarui!', 'success');
                }
            }

            function deletePerformance(performanceId) {
                let performance = JSON.parse(localStorage.getItem('hris_performance')) || [];
                performance = performance.filter(p => p.id !== performanceId);
                localStorage.setItem('hris_performance', JSON.stringify(performance));
                
                // Refresh tables
                loadPerformance();
                showAlert('performanceAlert', 'Evaluasi kinerja berhasil dihapus!', 'success');
            }

            function filterPerformance() {
                const searchTerm = document.getElementById('performanceSearch').value.toLowerCase();
                const statusFilter = document.getElementById('performanceFilter').value;
                
                let performance = JSON.parse(localStorage.getItem('hris_performance')) || [];
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                
                // Apply filters
                if (searchTerm) {
                    performance = performance.filter(record => {
                        const employee = employees.find(e => e.id === record.empId);
                        if (!employee) return false;
                        
                        return (
                            employee.firstName.toLowerCase().includes(searchTerm) || 
                            employee.lastName.toLowerCase().includes(searchTerm) ||
                            record.period.toLowerCase().includes(searchTerm) ||
                            employee.position.toLowerCase().includes(searchTerm)
                        );
                    });
                }
                
                if (statusFilter) {
                    performance = performance.filter(record => record.status === statusFilter);
                }
                
                // Render filtered results
                renderPerformanceTable(performance, 'performanceTable');
            }

            // Utility functions
            function formatDate(dateString) {
                if (!dateString) return '';
                
                const date = new Date(dateString);
                if (isNaN(date.getTime())) return dateString;
                
                const day = date.getDate().toString().padStart(2, '0');
                const month = (date.getMonth() + 1).toString().padStart(2, '0');
                const year = date.getFullYear();
                
                return `${day} ${getMonthName(date.getMonth())} ${year}`;
            }

            function formatMonthYear(period) {
                if (!period) return '';
                
                const [year, month] = period.split('-');
                if (!year || !month) return period;
                
                return `${getMonthName(parseInt(month) - 1)} ${year}`;
            }

            function getMonthName(monthIndex) {
                const months = [
                    'Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun',
                    'Jul', 'Agu', 'Sep', 'Okt', 'Nov', 'Des'
                ];
                return months[monthIndex] || '';
            }

            function formatCurrency(amount) {
                return 'Rp ' + amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.');
            }

            function getStatusClass(status) {
                switch (status) {
                    case 'Active':
                    case 'Hadir':
                    case 'Disetujui':
                    case 'Selesai':
                    case 'Dibayar':
                        return 'status-active';
                    case 'Inactive':
                    case 'Ditolak':
                    case 'Dibatalkan':
                        return 'status-inactive';
                    case 'Menunggu':
                    case 'Dalam Proses':
                    case 'Proses':
                        return 'status-pending';
                    default:
                        return '';
                }
            }

            function showAlert(alertId, message, type) {
                const alert = document.getElementById(alertId);
                const alertMessage = document.getElementById(alertId + 'Message');
                
                alert.classList.remove('alert-success', 'alert-danger', 'd-none');
                alert.classList.add('alert-' + type);
                alertMessage.textContent = message;
                alert.classList.remove('d-none');
                
                // Hide alert after 5 seconds
                setTimeout(() => {
                    alert.classList.add('d-none');
                }, 5000);
            }

            function confirmDelete(type, id) {
                const modal = document.getElementById('confirmModal');
                const title = document.getElementById('confirmTitle');
                const message = document.getElementById('confirmMessage');
                const actionBtn = document.getElementById('confirmAction');
                
                // Set confirmation message
                title.textContent = 'Konfirmasi Penghapusan';
                message.textContent = `Apakah Anda yakin ingin menghapus data ${type} ini?`;
                
                // Set action based on type
                actionBtn.onclick = function() {
                    switch (type) {
                        case 'employee':
                            deleteEmployee(id);
                            break;
                        case 'attendance':
                            deleteAttendance(id);
                            break;
                        case 'leave':
                            deleteLeave(id);
                            break;
                        case 'payroll':
                            deletePayroll(id);
                            break;
                        case 'performance':
                            deletePerformance(id);
                            break;
                    }
                    
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                };
                
                // Open modal
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }

            function updatePagination(tableId, totalItems) {
                const itemsPerPage = 5;
                const totalPages = Math.ceil(totalItems / itemsPerPage);
                const pagination = document.getElementById(tableId + 'Pagination');
                
                pagination.innerHTML = '';
                
                for (let i = 1; i <= totalPages; i++) {
                    const button = document.createElement('button');
                    button.textContent = i;
                    button.addEventListener('click', function() {
                        // In a real app, this would load the specific page of data
                        // For this demo, we'll just highlight the active page
                        pagination.querySelectorAll('button').forEach(btn => {
                            btn.classList.remove('active');
                        });
                        this.classList.add('active');
                    });
                    
                    if (i === 1) {
                        button.classList.add('active');
                    }
                    
                    pagination.appendChild(button);
                }
            }

            function updateDashboardStats() {
                const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                const attendance = JSON.parse(localStorage.getItem('hris_attendance')) || [];
                const leave = JSON.parse(localStorage.getItem('hris_leave')) || [];
                const payroll = JSON.parse(localStorage.getItem('hris_payroll')) || [];
                
                // Total employees
                document.getElementById('totalEmployees').textContent = employees.length;
                
                // Employee change (random for demo)
                const change = Math.floor(Math.random() * 10) - 2; // -2 to 7
                document.getElementById('employeeChange').textContent = change > 0 ? `+${change}%` : `${change}%`;
                
                // Today's attendance
                const today = formatDate(new Date());
                const todayAttendance = attendance.filter(a => a.date === today && a.status === 'Hadir').length;
                document.getElementById('todayAttendance').textContent = todayAttendance;
                
                // Absent today
                const activeEmployees = employees.filter(e => e.status === 'Active').length;
                document.getElementById('absentToday').textContent = activeEmployees - todayAttendance;
                
                // Pending leave
                const pendingLeave = leave.filter(l => l.status === 'Menunggu').length;
                document.getElementById('pendingLeave').textContent = pendingLeave;
                
                // Waiting approval
                document.getElementById('waitingApproval').textContent = pendingLeave;
                
                // Monthly salary (from latest payroll or calculate from employees)
                let monthlySalary = 0;
                if (payroll.length > 0) {
                    monthlySalary = payroll[payroll.length - 1].total;
                } else {
                    monthlySalary = employees.reduce((sum, emp) => sum + (emp.salary || 0), 0);
                }
                document.getElementById('monthlySalary').textContent = formatCurrency(monthlySalary);
            }

            function refreshTabData(tabId) {
                switch (tabId) {
                    case 'dashboard':
                        updateDashboardStats();
                        break;
                    case 'employees':
                        loadEmployees();
                        break;
                    case 'attendance':
                        loadAttendance();
                        break;
                    case 'leave':
                        loadLeave();
                        break;
                    case 'payroll':
                        loadPayroll();
                        break;
                    case 'performance':
                        loadPerformance();
                        break;
                    case 'settings':
                        loadSettings();
                        break;
                }
            }

            function refreshSubTabData(mainTabId, subTabId) {
                switch (mainTabId) {
                    case 'employees':
                        const employees = JSON.parse(localStorage.getItem('hris_employees')) || [];
                        
                        if (subTabId === 'all-employees') {
                            renderEmployeesTable(employees, 'allEmployeesTable');
                        } else if (subTabId === 'active-employees') {
                            renderEmployeesTable(employees.filter(e => e.status === 'Active'), 'activeEmployeesTable');
                        } else if (subTabId === 'inactive-employees') {
                            renderEmployeesTable(employees.filter(e => e.status === 'Inactive'), 'inactiveEmployeesTable');
                        } else if (subTabId === 'on-leave') {
                            // For demo, we'll just show active employees
                            renderEmployeesTable(employees.filter(e => e.status === 'Active'), 'onLeaveEmployeesTable');
                        }
                        break;
                    
                    case 'leave':
                        const leave = JSON.parse(localStorage.getItem('hris_leave')) || [];
                        
                        if (subTabId === 'all-leave') {
                            renderLeaveTable(leave, 'allLeaveTable');
                        } else if (subTabId === 'pending-leave') {
                            renderLeaveTable(leave.filter(l => l.status === 'Menunggu'), 'pendingLeaveTable');
                        } else if (subTabId === 'approved-leave') {
                            renderLeaveTable(leave.filter(l => l.status === 'Disetujui'), 'approvedLeaveTable');
                        } else if (subTabId === 'rejected-leave') {
                            renderLeaveTable(leave.filter(l => l.status === 'Ditolak'), 'rejectedLeaveTable');
                        }
                        break;
                }
            }
        </script>
    </body>
</html>
